\documentclass[main.tex]{subfiles}

\begin{document}

\chapter{Abelian categories}
\label{ch:abelian_categories}

\section{Basics}
\label{sec:basics}

Abelian categories provide a categorical axiomatization of the properties of the category $\Rmod$ of modules over a (not necessarily commutative) ring $R$; in fact, one can show that any small abelian category is a full subcategory of $\Rmod$ for some $R$. Homological is the study of chain complexes of $R$-modules, and hence of the study of chain complexes in an abelian category.

One of the benefits of working with abelian categories rather than working directly $\Rmod$ is that many things which are not obviously abelian categories turn out to be abelian categories; for example, the category of chain complexes in an abelian category is itself an abelian category, so when one is studying abelian categories one is already learning something about chain complexes in an abelian category.

\subsection{Building blocks}
\label{ssc:building_blocks}

\subsubsection{Additive categories}

\begin{definition}[\texorpdfstring{$\Ab$}{Ab}-enriched category]
  \label{def:ab_enriched_category}
  A category $\mathcal{C}$ is called \emph{$\Ab$-enriched} if it is enriched over the symmetric monoidal category $(\Ab, \otimes_{\Z})$.
\end{definition}


\begin{definition}[additive category]
  \label{def:additivecategory}
  A category $\mathcal{C}$ is \defn{additive} if it has finite products (including a terminal object) and is $\Ab$-enriched.
\end{definition}

\begin{proposition}
  \label{prop:in_additive_category_products_coproducts_agree}
  Let $\mathcal{C}$ be an additive category. Then any terminal object is also an initial object, and the product $A \times B$ satisfies the universal property for a coproduct $A \amalg B$.
\end{proposition}
\begin{proof}
  First we show that any terminal object is also initial. Denote by $*$ a terminal object in $\mathcal{C}$. The unique morphism $\id_{*}\colon * \to *$ must be the additive identity $e_{* \to *}$ in the abelian group $\Hom(*, *)$. Let $X$ be any other object in $\mathcal{C}$, and let $f\colon * \to X$. Then $e_{* \to *} \circ f = f$. However, since composition is bilinear, we also have $e_{* \to *} \circ f = e_{* \to X}$. Thus, there is a unique map $* \to X$ for all $X$, so $*$ is an initial object. Hence it is a zero object. From now on, we will write $0$ for zero objects.

  Now we show that binary products are also coproducts. By the universal property for products, we get a unique map $i_{A}\colon A \to A \times B$ making the following diagram commute.
  \begin{equation*}
    \begin{tikzcd}
      & A
      \arrow[dr, "0"]
      \arrow[dl, swap, "\id_{A}"]
      \arrow[d, "\exists! i_{A}"]
      \\
      A
      & A \times B
      \arrow[l, "\pi_{A}"]
      \arrow[r, swap, "\pi_{B}"]
      & B
    \end{tikzcd}
  \end{equation*}
  Similarly, there exists a unique map $i_{B}\colon B \to A \times B$ making the diagram
  \begin{equation*}
    \begin{tikzcd}
      & B
      \arrow[dr, "\id_{B}"]
      \arrow[dl, swap, "0"]
      \arrow[d, "\exists! i_{B}"]
      \\
      A
      & A \times B
      \arrow[l, "\pi_{A}"]
      \arrow[r, swap, "\pi_{B}"]
      & B
    \end{tikzcd}
  \end{equation*}
  commute.

  Consider the following diagram.
  \begin{equation*}
    \begin{tikzcd}
      & A \times B
      \arrow[dr, "\pi_{B}"]
      \arrow[dl, swap, "\pi_{A}"]
      \arrow[d, dashed, "\exists!"]
      \\
      A
      & A \times B
      \arrow[r, swap, "\pi_{B}"]
      \arrow[l, "\pi_{A}"]
      & B
    \end{tikzcd}
  \end{equation*}
  Obviously, the identity map $\id_{A \times B}$ makes this diagram commute. However
  \begin{equation*}
    \pi_{A} \circ (i_{A} \circ \pi_{A} + i_{B} \circ \pi_{B}) = \pi_{A}
  \end{equation*}
  and
  \begin{equation*}
    \pi_{B} \circ (i_{A} \circ \pi_{A} + i_{B} \circ \pi_{B}) = \pi_{B},
  \end{equation*}
  so the map $i_{A} \circ \pi_{A} + i_{B} \circ \pi_{B}$ also does. Thus,
  \begin{equation*}
    \pi_{A} \circ i_{A} + \pi_{B} \circ i_{B} = \id_{A \times B}.
  \end{equation*}

  We now claim that $A \times B$, together with the maps $i_{A}$ and $i_{B}$, satisfy the universal property for coproducts. To see this, let $X$ be an object and $f\colon A \to A \times B$ and $g\colon B \to A \times B$ be morphisms.
  \begin{equation*}
    \begin{tikzcd}
      A
      \arrow[r, "i_{A}"]
      \arrow[dr, swap, "f"]
      & A \times B
      \arrow[d, dashed, "\phi"]
      & B
      \arrow[l, swap, "i_{B}"]
      \arrow[dl, "g"]
      \\
      & X
    \end{tikzcd}
  \end{equation*}
  We need to show that there exists a unique morphism $\phi$ making the diagram commute. Note that, by logic identical to that above, taking
  \begin{equation*}
    \phi = f \circ \pi_{A} + g \circ \pi_{B}
  \end{equation*}
  makes the above diagram commute. Now suppose that there exists another $\tilde{\phi}$ making the diagram commute. Then
  \begin{align*}
    \tilde{\phi} &= \tilde{\phi} \circ \id_{A \times B} \\
    &= \tilde{\phi} \circ (i_{A} \circ \pi_{A} + i_{B} \circ \pi_{B}) \\
    &= f \circ \pi_{A} + g \circ \pi_{B} \\
    &= \phi.
  \end{align*}
\end{proof}

\hyperref[prop:in_additive_category_products_coproducts_agree]{Proposition~\ref*{prop:in_additive_category_products_coproducts_agree}} tells us that, in an additive category with products, we also have coproducts, and that these agree with the products. Dually, we could have defined an additive category to be a category with coproducts; the dual to \hyperref[prop:in_additive_category_products_coproducts_agree]{Proposition~\ref*{prop:in_additive_category_products_coproducts_agree}} would then have shown us that these agreed with products. Rather than preferencing either the notation for products or the notation for coproducts, we will use a new symbol.

\begin{definition}[direct sum]
  \label{def:direct_sum}
  Let $\mathcal{C}$ be a category with products \(\times\) (including a terminal object \(*\)) and coproducts \(\amalg\) (including an initial object \(\emptyset\)). If products and coproducts agree in the sense that the canonical map $A \amalg B \to A \times B$ is an isomorphism, then we say that $\mathcal{C}$ has \defn{direct sums}, and denote the (co)product of $A$ and $B$ by $A \oplus B$.
\end{definition}

\begin{lemma}
  \label{lemma:conditions_for_direct_sum}
  Let $A$ and $B$ be objects in an additive category $\mathcal{A}$, and let $X$ be an object in $\mathcal{A}$ equipped with morphisms as follows,
  \begin{equation*}
    \begin{tikzcd}
      A
      \arrow[dr, "i_{A}"]
      && A
      \\
      & X
      \arrow[ur, "\pi_{A}"]
      \arrow[dr, swap, "\pi_{A}"]
      \\
      B
      \arrow[ur, swap, "i_{B}"]
      && B
    \end{tikzcd}
  \end{equation*}
  such that the following equations hold.
  \begin{gather*}
    i_{A} \circ \pi_{A} + i_{B} \circ \pi_{B} = \id_{X} \\
    \pi_{A} \circ i_{B} = 0 = \pi_{B} \circ i_{A} \\
    \pi_{A} \circ i_{A} = \id_{A} \\
    \pi_{B} \circ i_{B} = \id_{B} \\
  \end{gather*}
  Then the $\pi$s and $i$s exhibit $X \cong A \oplus B$.
\end{lemma}
\begin{proof}
  It suffices to show that $X$ is a product of $A$ and $B$. Let $f\colon Z \to A$ and $g\colon Z \to B$. We need to show that there exists a unique $\phi\colon Z \to X$ making the following diagram commute.
  \begin{equation*}
    \begin{tikzcd}
      & Z
      \arrow[dl, swap, "f"]
      \arrow[d, dashed, "\phi"]
      \arrow[dr, "g"]
      \\
      A
      & X
      \arrow[l, swap, "\pi_{A}"]
      \arrow[r, "\pi_{B}"]
      & B
    \end{tikzcd}
  \end{equation*}
  That is, we need
  \begin{equation*}
    \pi_{A} \circ \phi = f,\qquad \pi_{B} \circ \phi = g.
  \end{equation*}
  Thus, we need
  \begin{align*}
    i_{A} \circ f + \pi_{B} \circ g  &= i_{A} \circ \pi_{A} \circ \phi + i_{B} \circ \pi_{B} \circ \phi \\
    &= \phi.
  \end{align*}
  It is easy to check that $\phi$ defined in this way \emph{does} make the diagram commute, so $\phi$ exists and is unique.
\end{proof}

\begin{definition}[additive functor]
  \label{def:additivefunctor}
  Let $F\colon \mathcal{C} \rightarrow \mathcal{D}$ be a functor between additive categories. We say that $F$ is \defn{additive} if for each $X$, $Y \in \Obj(\mathcal{C})$ the map
  \begin{equation*}
    \Hom_{\mathcal{C}}(X, Y) \to \Hom_{\mathcal{D}}(F(X), F(Y))
  \end{equation*}
  is a homomorphism of abelian groups.
\end{definition}


\begin{corollary}
  Let $F\colon \mathcal{A} \to \mathcal{B}$ be an additive functor between additive categories. Then $F$ preserves direct sums in the sense that there is a natural isomorphism
  \begin{equation*}
    F(A \oplus B) \simeq F(A) \oplus F(B).
  \end{equation*}
  Conversely, if $F$ preserves products,
\end{corollary}
\begin{proof}
  Apply $F$ to the data of \hyperref[lemma:conditions_for_direct_sum]{Lemma~\ref*{lemma:conditions_for_direct_sum}}.
\end{proof}

\subsubsection{Pre-abelian categories}

\begin{definition}[kernel, cokernel]
  \label{def:kernel_cokernel}
  Let $f\colon A \to B$ be a morphism in an abelian category.
  \begin{itemize}
    \item A pair $(K, \iota)$, where $\iota\colon K \to A$ is a morphism, is a \defn{kernel} of $f$ if $f \circ \iota = 0$ and for every object $X$ and morphism $g\colon X \to A$ such that $f \circ g = 0$, there exists a unique morphism $\alpha\colon X \to K$ such that $f \circ \alpha = 0$.
      \begin{equation*}
        \begin{tikzcd}
          & X
          \arrow[d, "g"]
          \arrow[dr, "0"]
          \arrow[dl, swap, dashed, "\exists!"]
          \\
          K
          \arrow[r, "\iota"]
          \arrow[rr, bend right, swap, "0"]
          & A
          \arrow[r, "f"]
          & B
        \end{tikzcd}
      \end{equation*}

    \item A pair $(C, \pi)$, where $\pi\colon B \to C$ is a morphism, is a \defn{cokernel} of $f$ if $\pi \circ f = 0$ and for every object $Y$ and morphism $g\colon B \to Y$ such that $g \circ f = 0$, there exists a unique morphism $\beta\colon C \to Y$ such that $\beta \circ f = 0$.
      \begin{equation*}
        \begin{tikzcd}
          A
          \arrow[r, swap, "f"]
          \arrow[dr, swap, "0"]
          \arrow[rr, bend left, "0"]
          & B
          \arrow[r, swap, "\pi"]
          \arrow[d, "g"]
          & C
          \arrow[dl, dashed, "\exists!"]
          \\
          & Y
        \end{tikzcd}
      \end{equation*}
  \end{itemize}
\end{definition}

Here are some equivalent ways of defining the kernel of a morphism $f\colon A \to B$.
\begin{itemize}
  \item The equalizer of $f$ with the zero map.
    \begin{equation*}
      \begin{tikzcd}
        \ker f = \mathrm{eq}
        \arrow[r]
        & A
        \arrow[r, shift left, "f"]
        \arrow[r, shift right, swap, "0"]
        & B
      \end{tikzcd}
    \end{equation*}

  \item The pullback along the zero morphism
    \begin{equation*}
      \begin{tikzcd}
        \ker f
        \arrow[r]
        \arrow[d]
        & 0
        \arrow[d]
        \\
        A
        \arrow[r, "f"]
        & B
      \end{tikzcd}
    \end{equation*}
\end{itemize}

\begin{definition}[pre-abelian category]
  \label{def:pre_abelian_category}
  A \defn{pre-abelian} category is an additive category such that every morphism has a kernel and a cokernel.
\end{definition}

\begin{lemma}
  \label{lemma:pre_abelian_categories_have_finite_limits_and_colimits}
  Pre-abelian categories have all finite limits and colimits.
\end{lemma}
\begin{proof}
  In a pre-abelian category, the equalizer of $f$ and $g$ is the kernel of $f-g$, and the coequalizer is the cokernel of $f-g$. Thus, pre-abelian categories have finite products and equalizers, and finite coproducts and coequalizers.
\end{proof}

\begin{proposition}
  In a pre-abelian category, kernels are monic and cokernels are epic.
\end{proposition}
\begin{proof}
  The kernel of $f\colon A \to B$ is the pullback of the morphism $0 \to B$, which is monic. The pullback of a monic is a monic, which gives the result.
\end{proof}

\begin{proposition}
  \label{prop:kernels_and_cokernels_of_monos_and_epis_in_pre_abelian_categories}
  Let $\mathcal{C}$ be a pre-abelian category, and let $f\colon A \to B$ be a morphism.
  \begin{enumerate}
    \item The morphism $f$ is a monomorphism if and only if $\ker f = 0$.

    \item The morphism $f$ is an epimorphism if and only if $\coker f = 0$.
  \end{enumerate}
\end{proposition}
\begin{proof}
  \leavevmode
  \begin{enumerate}
    \item Suppose $f$ is a monomorphism, and consider a morphism $g$ making the following diagram commute.
      \begin{equation*}
        \begin{tikzcd}
          & Z
          \arrow[d, "g"]
          \arrow[dr, "0"]
          \\
          \ker f
          \arrow[r, hook, "\iota"]
          & A
          \arrow[r, hook, "f"]
          & B
        \end{tikzcd}
      \end{equation*}

      Because $f$ is a monomorphism, we have $g = 0$. By the universal property for kernels, there exists a unique map $Z \to \ker f$ making the above diagram commute.
      \begin{equation*}
        \begin{tikzcd}
          & Z
          \arrow[d, "g"]
          \arrow[dr, "0"]
          \arrow[dl, dashed, swap, "\exists!"]
          \\
          \ker f
          \arrow[r, hook, "\iota"]
          & A
          \arrow[r, hook, "f"]
          & B
        \end{tikzcd}
      \end{equation*}
      But this remains true if we replace $\ker f$ by $0$, so by definition we must have $\ker f = 0$.

      Now suppose that $\ker f = 0$, and let $g\colon X \to A$ such that $f \circ g = 0$. The universal property guarantees us a morphism $\alpha\colon X \to K$ making the left-hand triangle below commute.
      \begin{equation*}
        \begin{tikzcd}
          & Z
          \arrow[d, "g"]
          \arrow[dr, "0"]
          \arrow[dl, dashed, swap, "\exists!"]
          \\
          \ker f = 0
          \arrow[r, hook, "\iota"]
          & A
          \arrow[r, "f"]
          & B
        \end{tikzcd}
      \end{equation*}
      However, the only way the left-hand triangle can commute is if $g = 0$. Thus, $f$ is mono.

    \item Dual.
  \end{enumerate}
\end{proof}

\subsection{Abelian categories}
\label{ssc:abelian_categories}

We have seen that in a pre-abelian category, kernels and cokernels more or less behave as they do in the category of modules over some ring $R$. However, the first isomorphism theorem tells us that every submodule is the kernel of some module homomorphism (namely the cokernel), and every quotient module of some module homomorphism (namely the kernel). We therefore add an extra axiom to enforce this behavior.

\begin{definition}[abelian category]
  \label{def:abelian_cateogry}
  A pre-abelian category is said to be \defn{abelian} if every monomorphism is the kernel of its cokernel, and every epimorphism is the cokernel of its kernel.
\end{definition}

The above definition is equivalent to the following: an abelian category is:
\begin{itemize}
  \item a category \(\mathcal{A}\);

  \item enriched over \((\Ab, \otimes_{\Z})\);

  \item with finite products (hence direct sums);

  \item such that every morphism has a kernel and a cokernel;

  \item such that every monomorphism is the kernel of its cokernel, and every epimorphism is the cokernel of its kernel.
\end{itemize}

\begin{proposition}
  Let $\mathcal{A}$ be an abelian category, and let $f\colon A \to B$ be a morphism in $\mathcal{A}$. Then $f$ is an isomorphism if and only if $\ker f = 0$ and $\coker f = 0$.
\end{proposition}
\begin{proof}
  If $f$ is an isomorphism, then it is mono and epi, and we are done by \hyperref[prop:kernels_and_cokernels_of_monos_and_epis_in_pre_abelian_categories]{Proposition~\ref*{prop:kernels_and_cokernels_of_monos_and_epis_in_pre_abelian_categories}}.

  Conversely, if $\ker f = 0$ and $\coker f = 0$, then $f$ is mono and epi. We need only to show that any morphism in an abelian category which is monic and epic is an isomorphism.

  Let $f$ be monic and epic. Then $f$ is the kernel of its cokernel and the cokernel of its kernel, and both of these are zero.
  \begin{equation*}
    \begin{tikzcd}
      && B
      \arrow[d, equals]
      \arrow[dr, "0"]
      \arrow[dl, dashed, swap, "\exists!f^{-1}_{R}"]
      \\
      \ker f = 0
      \arrow[r]
      & A
      \arrow[r, two heads, hook, "f"]
      & B
      \arrow[r]
      \arrow[dl, dashed, "\exists!f^{-1}_{L}"]
      & 0 = \coker f
      \\
      & A
      \arrow[u, equals]
      \arrow[ul, "0"]
    \end{tikzcd}
  \end{equation*}
  The universal properties for kernels and cokernels give us respectively morphisms $f^{-1}_{L}$ and $f^{-1}_{R}$ such that
  \begin{equation*}
    \begin{tikzcd}
      f \circ f^{-1}_{R} = \id_{A},\qquad f^{-1}_{L} \circ f = \id_{B}.
    \end{tikzcd}
  \end{equation*}
  The usual trick shows that $f^{-1}_{L} = f^{-1}_{R}$.
\end{proof}

As the following proposition shows, additive functors from additive categories preserve direct sums.
\begin{example}
  \label{eg:examples_of_abelian_categories}
  Once it is known that a category $\mathcal{A}$ is abelian, a number of other categories are immediately known to be abelian.
  \begin{itemize}
    \item The category $\Ch(\mathcal{A})$ of chain complexes in $\mathcal{A}$ is abelian, as we will see in

    \item For any small category $I$, the category $\mathbf{Fun}(I, \mathcal{A})$ of $I$-diagrams in $\mathcal{A}$ is abelian. To see this, note the following.
      \begin{itemize}
        \item Addition of natural transformations, defined pointwise, is an $\Ab$-enrichment.

        \item Finite products exist because limits in functor categories are taken pointwise.

        \item Every morphism has a kernel and cokernel; and every monomorphism is the kernel of its cokernel; and every epimorphism is the cokernel of its kernel; because limits and colimits in functor categories are taken pointwise.
      \end{itemize}
  \end{itemize}
\end{example}

\subsection{Abelian-ness is a property, not a structure}
\label{ssc:abelian_ness_is_a_property_not_a_structure}

Our definition of an abelian category, namely an $\Ab$-enriched category with products, kernels, and cokernels, such that every monomorphism is the kernel of its cokernel and every epimorphism is the cokernel of its kernel, makes it sound like ordinary categories could never aspire to be abelian categories. After all, an addition law on morphisms is extra structure, which one would have to provide to get an $\Ab$-enriched category from an ordinary category.

Not so! It turns out that demanding that a category $\mathcal{C}$ admit finite direct sums is sufficient to uniquely determine the structure of a commutative monoid on each hom-set, as will follow from the Eckmann-Hilton argument. Furthermore, the axioms regarding the existence and properties of kernels and cokernels are enough to imply that each commutative monoid is an abelian group.

\begin{proposition}[Eckmann-Hilton]
  Let $S$ be a set and let $\bullet$ and $\star$ be two unital binary operations on $S$, with units $0_{\bullet}$ and $0_{\star}$, satisfying the \emph{interchange rule}
  \begin{equation*}
    (a \bullet b) \star (c \bullet d) = (a \star c) \bullet (b \star d) .
  \end{equation*}
  Then the operations $\bullet$ and $\star$ coincide, and they are (it is) associative and commutative.
\end{proposition}
\begin{proof}
  We immediately invent new notation, writing
  \begin{equation*}
    a \bullet b = (a\ b), \qquad \text{and}\qquad
    a \star b =
    \begin{pmatrix}
      a \\ b
    \end{pmatrix}.
  \end{equation*}
  Then the interchange rule can be written
  \begin{equation*}
    \begin{pmatrix}
      (a\ b)
      \\
      (c\ d)
    \end{pmatrix}
    =
    \left(
    \begin{pmatrix}
      a \\ c
    \end{pmatrix}
    \
    \begin{pmatrix}
      b \\ d
    \end{pmatrix}
    \right).
  \end{equation*}
  We will therefore without fear of confusion denote this operation by
  \begin{equation*}
    \begin{pmatrix}
      a & b
      \\
      c & d
    \end{pmatrix}.
  \end{equation*}
  First, we note that the units $0_{\bullet}$ and $0_{\star}$ are equal since
  \begin{equation*}
    0_{\bullet} = (0_{\bullet}\ 0_{\bullet}) =
    \begin{pmatrix}
      0_{\bullet} & 0_{\star}
      \\
      0_{\star} & 0_{\bullet}
    \end{pmatrix}
    =
    \begin{pmatrix}
      0_{\star}
      \\
      0_{\star}
    \end{pmatrix}
    = 0_{\star}.
  \end{equation*}
  From now on, we will write $0_{\bullet} = 0_{\star} = 0$. To see that $\star$ and $\bullet$ are equal and commutative, note that
  \begin{equation*}
    (a\ b) =
    \begin{pmatrix}
      a & 0 \\
      0 & b
    \end{pmatrix}
    =
    \begin{pmatrix}
      a \\ b
    \end{pmatrix}
    =
    \begin{pmatrix}
      0 & a \\
      b & 0
    \end{pmatrix}
    = (b\ a).
  \end{equation*}
\end{proof}

For any object $A$, denote the diagonal map $A \to A \oplus A$ by $\Delta$, and the codiagonal map $A \oplus A \to A$ by $\nabla$. 

\begin{definition}
  Let $\mathcal{A}$ be an abelian category, and let $A$, $B$ in $\mathcal{A}$. Define the following operations on the set $\Hom_{\mathcal{A}}(A, B)$.
  \begin{enumerate}
    \item Define $f \plusl g$ to be the composition
      \begin{equation*}
        \begin{tikzcd}
          A
          \arrow[r, "\Delta"]
          & A \oplus A
          \arrow[r, "{(f, g)}"]
          & B
        \end{tikzcd}.
      \end{equation*}
      
    \item Define $f \plusr g$ to be the composition
      \begin{equation*}
        \begin{tikzcd}
          A
          \arrow[r, "{(f, g)}"]
          & B \oplus B
          \arrow[r, "\nabla"]
          & B
        \end{tikzcd}.
      \end{equation*}
  \end{enumerate}
\end{definition}

\begin{proposition}
  Let $\mathcal{C}$ be a category with finite direct sums\footnote{Including 0-ary direct sums, i.e.\ a zero object.} (\hyperref[def:direct_sum]{Definition~\ref*{def:direct_sum}}). Then $\mathcal{C}$ has a canonical enrichment in commutative monoids.
\end{proposition}
\begin{proof}
  Let $A \in \mathcal{C}$ be an object. Let $f$, $g\colon A \to B$. We define
  \begin{equation*}
    f + g = \nabla \circ (f \oplus g) \circ \Delta.
  \end{equation*}
  To see that this is an enrichment in commutative monoids, note the following.
  \begin{enumerate}
    \item With $0$ the zero morphism, we have
      \begin{equation*}
        f + 0
      \end{equation*}
  \end{enumerate}
\end{proof}

We can then define an abelian category to be a category with finite direct sums such that the canonical enrichment in commutative monoids happens to be an \(\Ab\)-enrichment. Thus, we have the following.

\begin{corollary}
  \label{cor:functor_additive_iff_preserves_direct_sums}
  Let $F\colon \mathcal{A} \to \mathcal{B}$  be a functor between additive categories. Then $F$ is additive if and only if it preserves direct sums.
\end{corollary}

\section{Embedding theorems}
\label{sec:embedding_theorems}

In ordinary category theory, when manipulating a locally small category it is often helpful to pass through the Yoneda embedding, which gives a (fully) faithful rendition of the category under consideration in the category $\Set$. One of the reasons that this is so useful is that the category $\Set$ has a lot of structure which can use to prove things about the subcategory of $\Set$ in which one lands. Having done this, one can then use the fully faithfulness to translate results to the category under consideration.

This sort of procedure, namely embedding a category which is difficult to work with into one with more desirable properties and then translating results back and forth, is very powerful. In the context of (small) Abelian categories one has essentially the best possible such embedding, known as the Freyd-Mitchell embedding theorem, which we will revisit at the end of this section. However, for now we will content ourselves with a simpler categorical embedding, one which we can work with easily.

In abelian categories, one can defines kernels and cokernels slickly, as for example the equalizer along the zero morphism. However, in full generality, we can define both kernels and cokernels in any category with a zero obect: $f$ is a kernel for $g$ if and only the diagram below is a pullback, and a $g$ is a cokernel of $f$ if and only if the diagram below is a pushout.
\begin{equation*}
  \begin{tikzcd}
    A
    \arrow[r, "f"]
    \arrow[d]
    & B
    \arrow[d, "g"]
    \\
    0
    \arrow[r]
    & C
  \end{tikzcd}
\end{equation*}
This means that kernels and cokernels are very general, as categories with zero objects are a dime a dozen. For example, the category $\pSet$ of pointed sets has the singleton $\{*\}$ as a zero object. This means that one can speak of the kernel or the cokernel of a map between pointed sets, and talk about an exact sequence of such maps.

Given an abelian category $\mathcal{A}$, suppose one could find an embedding $\mathcal{H}\colon \mathcal{A} \to \pSet$ which reflected exactness in the sense that if one started with a sequence $A \to B \to C$ in $\mathcal{A}$, mapped it into $\pSet$ finding a sequence $\mathcal{H}(A) \to \mathcal{H}(B) \to \mathcal{H}(C)$, and found that this sequence was exact, one could be sure that $A \to B \to C$ had been exact to begin with. Then every time one wanted to check the exactness of a sequence, one could embed that sequence in $\pSet$ using $\mathcal{H}$ and check exactness there. Effectively, one could check exactness of a sequence in $\mathcal{A}$ by manipulating the objects making up the sequence as if they had elements.

Or, suppose one could find an embedding as above as above which sent only zero morphisms to zero morphisms. Then one could check that a diagram commutes (equivalently, that the difference between any two different ways of getting between objects is equal to $0$) by checking the that the image of the diagram under our functor $\mathcal{H}$ commutes.

In fact, for $\mathcal{A}$ small, we will find a functor which satisfies both of these and more. Then, just as we are feeling pretty good about ourselves, we will state the Freyd-Mitchell embedding theorem, which blows our pitiful result out of the water.

We now construct our functor to $\pSet$.

\begin{definition}[category of contravariant epimorphisms]
  \label{def:category_of_contravariant_epimorphisms}
  Let $\mathcal{A}$ be a small abelian category. Define a category $\mathcal{A}_{\twoheadleftarrow}$ with $\Obj(\mathcal{A}_{\twoheadleftarrow}) = \Obj(\mathcal{A})$, and whose morphisms are defined by
  \begin{equation*}
    \Hom_{\mathcal{A}_{\twoheadleftarrow}}(X, Y) = \{f\colon Y \to X \text{ in }\mathcal{A}\mid f \text{ epimorphism}\}.
  \end{equation*}
\end{definition}

Note that this is indeed a category since the identity morphism is an epimorphism and epimorphisms are closed under composition.

Now for each $A \in \mathcal{A}$, we define a functor
\begin{equation*}
  \mathcal{H}_{A}\colon \mathcal{A}_{\twoheadleftarrow} \to \pSet;\qquad Z \mapsto \Hom_{\mathcal{A}}(Z, A)
\end{equation*}
and sends a morphism $f\colon Z_{1} \to Z_{2}$ in $\mathcal{A}_{\twoheadleftarrow}$ (which is to say, an epimorphism $\tilde{f}\colon Z_{2} \twoheadrightarrow Z_{1}$ in $\mathcal{A}$) to the map
\begin{equation*}
  \mathcal{H}_{A}(f)\colon \Hom_{\mathcal{A}}(Z_{1}, A) \to \Hom_{\mathcal{A}}(Z_{2}, A);\quad (\alpha\colon Z_{1} \to A) \mapsto (\alpha \circ \tilde{f}\colon Z_{2} \to A).
\end{equation*}
Note that the distinguished point in the hom sets above is given by the zero morphism.

\begin{definition}[member functor]
  \label{def:member_functor}
  Let $\mathcal{A}$ be a small abelian category. We define a functor $\mathcal{M}\colon \mathcal{A} \to \pSet$ on objects by
  \begin{equation*}
    A \mapsto \mathcal{M}(A) = \colim \mathcal{H}_{A}.
  \end{equation*}
  On morphisms, functorality comes from the functoriality of the colimit and the co-Yoneda embedding.
\end{definition}

Strictly speaking, we have finished our construction, but it doesn't do us much good as stated. It turns out that the sets $\mathcal{M}(\mathcal{A})$ have a much simpler interpretation.

\begin{proposition}
  \label{prop:formula_for_member_functor}
  for any $A \in \mathcal{A}$, the value of the member functor $\mathcal{M}(A)$ is
  \begin{equation*}
    \mathcal{M}(A) = \coprod_{X \in \mathcal{A}}\Hom(X, A) / \sim,
  \end{equation*}
  where $g \sim g'$ if there exist epimorphisms $f$ and $f'$ making the below diagram commute.
  \begin{equation*}
    \begin{tikzcd}
      Z
      \arrow[r, twoheadrightarrow, "f"]
      \arrow[d, twoheadrightarrow, swap, "f'"]
      & X
      \arrow[d, "g"]
      \\
      X'
      \arrow[r, swap, "g'"]
      & A
    \end{tikzcd}
  \end{equation*}
\end{proposition}
\begin{proof}
  The colimit can be computed using the following coequalizer.
  \begin{equation*}
    \begin{tikzcd}
      \displaystyle\coprod_{\substack{f \in \mathrm{Morph}(A_{\twoheadleftarrow})\\\tilde{f}\colon Y \to X}} \Hom_{\mathcal{A}}(X, A)
      \arrow[r, shift left, "\id"]
      \arrow[r, shift right, swap, "- \circ \tilde{f}"]
      & \displaystyle\coprod_{Z \in \Obj(\mathcal{A}_{\twoheadleftarrow})} \Hom(Z,A)
      \arrow[r, twoheadrightarrow, "\mathrm{coeq}"]
      & \mathcal{M}(A)
    \end{tikzcd}
  \end{equation*}
  On elements, we have the following.
  \begin{equation*}
    \begin{tikzcd}[row sep=tiny]
      & (g\colon X \to A)
      \arrow[dd, equals, "!"]
      \\
      (g\colon X \to A)
      \arrow[ur, mapsto, "\id"]
      \arrow[dr, mapsto, swap, "- \circ \tilde{f}"]
      \\
      & (g \circ \tilde{f}\colon Y \to A)
    \end{tikzcd}
  \end{equation*}

  Thus,
  \begin{equation*}
    \mathcal{M}(A) = \coprod_{Z \in \Obj(\mathcal{A}_{\twoheadleftarrow})} \Hom(Z, A)/\sim,
  \end{equation*}
  where $\sim$ is the equivalence relation generated by the relation
  \begin{equation*}
    (g\colon X \to A) R (g'\colon X' \to A) \impliedby \exists f\colon X' \twoheadrightarrow X \text{ such that } g' = g \circ \tilde{f}.
  \end{equation*}
  The above relation is reflexive and transitive, but not symmetric. The smallest equivalence relation containing it is the following.
  \begin{equation*}
    (g\colon X \to A) \sim (g'\colon X' \to A) \iff \exists f\colon Z \twoheadrightarrow X, f'\colon Z \twoheadrightarrow X' \text{ such that } g' \circ f' = g \circ f.
  \end{equation*}
  That is, $g \sim g'$ if there exist epimorphisms making the below diagram commute.
  \begin{equation*}
    \begin{tikzcd}
      Z
      \arrow[r, twoheadrightarrow, "f"]
      \arrow[d, twoheadrightarrow, swap, "f'"]
      & X
      \arrow[d, "g"]
      \\
      X'
      \arrow[r, swap, "g'"]
      & A
    \end{tikzcd}
  \end{equation*}
\end{proof}

In summary, the elements of $\mathcal{M}(A)$ are equivalence classes of morphsims into $A$ modulo the above relation, and for a morphism $f\colon A \to B$ in $\mathcal{A}$, $\mathcal{M}(f)$ acts on an equivalence class $[g]$ by
\begin{equation*}
  \mathcal{M}(f)\colon [g] \mapsto [g \circ f].
\end{equation*}

\begin{lemma}
  \label{lemma:member_relation_zero}
  Let $f\colon A \to B$ be a morphism in a small abelian category $\mathcal{A}$ such that $f \sim 0$. Then $f = 0$.
\end{lemma}
\begin{proof}
  We have that $f \sim 0$ if and only if there exists an object $Z$ and epimorphisms making the following diagram commute.
  \begin{equation*}
    \begin{tikzcd}
      Z
      \arrow[r, twoheadrightarrow, "g"]
      \arrow[d, twoheadrightarrow]
      & A
      \arrow[d, "f"]
      \\
      0
      \arrow[r]
      & B
    \end{tikzcd}
  \end{equation*}
  But by the universal property for epimorphisms, $f \circ g = 0$ implies $f = 0$.
\end{proof}

Now we introduce some load-lightening notation: we write $\hat{(-)} = \mathcal{M}(-)$.

\begin{lemma}
  \label{lemma:member_embedding_injective_on_zero}
  Let $f\colon A \to B$ be a morphism in a small abelian category $\mathcal{A}$. Then $f = 0$ if and only if $\hat{f}\colon \hat{A} \to \hat{B} = 0$.
\end{lemma}
\begin{proof}
  Suppose that $f = 0$. Then for any $[g] \in \hat{A}$
  \begin{equation*}
    \hat{f}([g]) = [g \circ 0] = [0].
  \end{equation*}
  Thus, $\hat{f}([g]) = [0]$ for all $g$, so $\hat{f} = 0$.

  Conversely, suppose that $\hat{f} = 0$. Then in particular $\hat{f}([\id_{A}]) = [0]$. But
  \begin{equation*}
    \hat{f}([\id_{A}]) = [\id_{A} \circ f] = [f].
  \end{equation*}
  By \hyperref[lemma:member_relation_zero]{Lemma~\ref*{lemma:member_relation_zero}}, $[f] = [0]$ implies $f = 0$.
\end{proof}

\begin{corollary}
  A diagram commutes in $\mathcal{A}$ if and only if its image in $\pSet$ under $\mathcal{M}$ commutes.
\end{corollary}
\begin{proof}
  A diagram commutes in $\mathcal{A}$ if and only if any two ways of going from one object to another agree, i.e.\ if the difference of any two

  I actually don't see this right now.
\end{proof}

\begin{lemma}
  \label{lemma:member_functor_preserves_mono_epi}
  Let $f\colon A \to B$ be a morphism in a small abelian category.
  \begin{itemize}
    \item The morphism $f$ is a monomorphism if and only if $\mathcal{M}(f)$ is an
  \end{itemize}
\end{lemma}

\end{document}
