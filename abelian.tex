\documentclass[main.tex]{subfiles}

\begin{document}

\chapter{Abelian categories}
\label{ch:abelian_categories}

\section{Basics}
\label{sec:basics}

In this chapter we recall some basic results.

A category is \emph{$\Ab$-enriched} if it is enriched over the symmetric monoidal category $(\Ab, \otimes_{\Z})$. In an $\Ab$-enriched category with finite products, products agree with coproducts, and we call both direct sums. We call an $\Ab$-enriched category with finite direct sums an \emph{additive} category, and we call a functor between additive categories such that the maps
\begin{equation*}
  \Hom(A, B) \to \Hom(F(A), F(B))
\end{equation*}
are homomorphisms of abelian groups an \emph{additive functor.} A \emph{pre-abelian} category is an additive category such that every morphism has a kernel and a cokernel, and an \emph{abelian category} is a pre-abelian category such that every monic is the kernel of its cokernel, and every epic is the cokernel of its kernel.

This immediately implies the following results.
\begin{itemize}
  \item Kernels are monic and cokernels are epic

  \item Since the equalizer of $f$ and $g$ is the kernel of $f-g$, abelian categories have all finite limits, and dually colimits.
\end{itemize}


As the following proposition shows, additive functors from additive categories preserve direct sums.
\begin{lemma}
  \label{lemma:conditions_for_direct_sum}
  Let $A$ and $B$ be objects in an additive category $\mathcal{A}$, and let $X$ be an object in $\mathcal{A}$ equipped with morphisms as follows,
  \begin{equation*}
    \begin{tikzcd}
      A
      \arrow[dr, "i_{A}"]
      && A
      \\
      & X
      \arrow[ur, "\pi_{A}"]
      \arrow[dr, swap, "\pi_{A}"]
      \\
      B
      \arrow[ur, swap, "i_{B}"]
      && B
    \end{tikzcd}
  \end{equation*}
  such that the following equations hold.
  \begin{gather*}
    i_{A} \circ \pi_{A} + i_{B} \circ \pi_{B} = \id_{X} \\
    \pi_{A} \circ i_{B} = 0 = \pi_{B} \circ i_{A} \\
    \pi_{A} \circ i_{A} = \id_{A} \\
    \pi_{B} \circ i_{B} = \id_{B} \\
  \end{gather*}
  Then the $\pi$s and $i$s exhibit $X \simeq A \oplus B$.
\end{lemma}

\begin{corollary}
  Let $F\colon \mathcal{A} \to \mathcal{B}$ be an additive functor between additive categories. Then $F$ preserves direct sums in the sense that there is a natural isomorphism
  \begin{equation*}
    F(a \oplus b) \simeq F(a) \oplus F(b).
  \end{equation*}
\end{corollary}

Once it is known that a category $\mathcal{A}$ is abelian, a number of other categories are immediately known to be abelian.
\begin{itemize}
  \item The category $\Ch(\mathcal{A})$ of chain complexes in $\mathcal{A}$ is abelian, as we will see in

  \item For any small category $I$, the category $\mathbf{Fun}(I, \mathcal{A})$ of $I$-diagrams in $\mathcal{A}$ is abelian.
\end{itemize}

\section{Embedding theorems}
\label{sec:embedding_theorems}

In ordinary category theory, when manipulating a locally small category it is often helpful to pass through the Yoneda embedding, which gives a (fully) faithful rendition of the category under consideration in the category $\Set$. One of the reasons that this is so useful is that the category $\Set$ has a lot of structure which can use to prove things about the subcategory of $\Set$ in which one lands. Having done this, one can then use the fully faithfulness to translate results to the category under consideration.

This sort of procedure, namely embedding a category which is difficult to work with into one with more desirable properties and then translating results back and forth, is very powerful. In the context of (small) Abelian categories one has essentially the best possible such embedding, known as the Freyd-Mitchell embedding theorem, which we will revisit at the end of this section. However, for now we will content ourselves with a simpler categorical embedding, one which we can work with easily.

In abelian categories, one can defines kernels and cokernels slickly, as for example the equalizer along the zero morphism. However, in full generality, we can define both kernels and cokernels in any category with a zero obect: $f$ is a kernel for $g$ if and only the diagram below is a pullback, and a $g$ is a cokernel of $f$ if and only if the diagram below is a pullback.
\begin{equation*}
  \begin{tikzcd}
    A
    \arrow[r, "f"]
    \arrow[d]
    & B
    \arrow[d, "g"]
    \\
    0
    \arrow[r]
    & C
  \end{tikzcd}
\end{equation*}
This means that kernels and cokernels are very general, as categories with zero objects are a dime a dozen. For example, the category $\pSet$ of pointed sets has the singleton $\{*\}$ as a zero object. This means that one can speak of the kernel or the cokernel of a map between pointed sets, and talk about an exact sequence of such maps.

Given an abelian category $\mathcal{A}$, suppose one could find an embedding $\mathcal{H}\colon \mathcal{A} \to \pSet$ which reflected exactness in the sense that if one started with a sequence $A \to B \to C$ in $\mathcal{A}$, mapped it into $\pSet$ finding a sequence $\mathcal{H}(A) \to \mathcal{H}(B) \to \mathcal{H}(C)$, and found that this sequence was exact, one could be sure that $A \to B \to C$ had been exact to begin with. Then every time one wanted to check the exactness of a sequence, one could embed that sequence in $\pSet$ using $\mathcal{H}$ and check exactness there. Effectively, one could check exactness of a sequence in $\mathcal{A}$ by manipulating the objects making up the sequence as if they had elements.

Or, suppose one could find an embedding as above as above which sent only zero morphisms to zero morphisms. Then one could check that a diagram commutes (equivalently, that the difference between any two different ways of getting between objects is equal to $0$) by checking the that the image of the diagram under our functor $\mathcal{H}$ commutes.

In fact, for $\mathcal{A}$ small, we will find a functor which satisfies both of these and more. Then, just as we are feeling pretty good about ourselves, we will state the Freyd-Mitchell embedding theorem, which blows our pitiful result out of the water.

We now construct our functor to $\pSet$.

\begin{definition}[category of contravariant epimorphisms]
  \label{def:category_of_contravariant_epimorphisms}
  Let $\mathcal{A}$ be a small abelian category. Define a category $\mathcal{A}_{\twoheadleftarrow}$ with $\Obj(\mathcal{A}_{\twoheadleftarrow}) = \Obj(\mathcal{A})$, and whose morphisms are defined by
  \begin{equation*}
    \Hom_{\mathcal{A}_{\twoheadleftarrow}}(X, Y) = \{f\colon Y \to X \text{ in }\mathcal{A}\mid f \text{ epimorphism}\}.
  \end{equation*}
\end{definition}

Note that this is indeed a category since the identity functor is an epimorphism and epimorphisms are closed under composition.

Now for each $A \in \mathcal{A}$, we define a functor
\begin{equation*}
  \mathcal{H}_{A}\colon \mathcal{A}_{\twoheadleftarrow} \to \pSet;\qquad Z \mapsto \Hom_{\mathcal{A}}(Z, A)
\end{equation*}
and sends a morphism $f\colon Z_{1} \to Z_{2}$ in $\mathcal{A}_{\twoheadleftarrow}$ (which is to say, an epimorphism $\tilde{f}\colon Z_{2} \twoheadrightarrow Z_{1}$ in $\mathcal{A}$) to the map
\begin{equation*}
  \mathcal{H}_{A}(f)\colon \Hom_{\mathcal{A}}(Z_{1}, A) \to \Hom_{\mathcal{A}}(Z_{2}, A);\quad (\alpha\colon Z_{1} \to A) \mapsto (\alpha \circ \tilde{f}\colon Z_{2} \to A).
\end{equation*}
Note that the distinguished point in the hom sets above is given by the zero morphism.

\begin{definition}[member functor]
  \label{def:member_functor}
  Let $\mathcal{A}$ be a small abelian category. We define a functor $\mathcal{M}\colon \mathcal{A} \to \pSet$ on objects by
  \begin{equation*}
    A \mapsto \mathcal{M}(A) = \colim \mathcal{H}_{A}.
  \end{equation*}
  On morphisms, functorality comes from the functoriality of the colimit and the co-Yoneda embedding.
\end{definition}

Strictly speaking, we have finished our construction, but it doesn't do us much good as stated. It turns out that the sets $\mathcal{M}(\mathcal{A})$ have a much simpler interpretation.

\begin{proposition}
  \label{prop:formula_for_member_functor}
  for any $A \in \mathcal{A}$, the value of the member functor $\mathcal{M}(A)$ is
  \begin{equation*}
    \mathcal{M}(A) = \coprod_{X \in \mathcal{A}}\Hom(X, A) / \sim,
  \end{equation*}
  where $g \sim g'$ if there exist epimorphisms $f$ and $f'$ making the below diagram commute.
  \begin{equation*}
    \begin{tikzcd}
      Z
      \arrow[r, twoheadrightarrow, "f"]
      \arrow[d, twoheadrightarrow, swap, "f'"]
      & X
      \arrow[d, "g"]
      \\
      X'
      \arrow[r, swap, "g'"]
      & A
    \end{tikzcd}
  \end{equation*}
\end{proposition}
\begin{proof}
  The colimit can be computed using the following coequalizer.
  \begin{equation*}
    \begin{tikzcd}
      \displaystyle\coprod_{\substack{f \in \mathrm{Morph}(A_{\twoheadleftarrow})\\\tilde{f}\colon Y \to X}} \Hom_{\mathcal{A}}(X, A)
      \arrow[r, shift left, "\id"]
      \arrow[r, shift right, swap, "- \circ \tilde{f}"]
      & \displaystyle\coprod_{Z \in \Obj(\mathcal{A}_{\twoheadleftarrow})} \Hom(Z,A)
      \arrow[r, twoheadrightarrow, "\mathrm{coeq}"]
      & \mathcal{M}(A)
    \end{tikzcd}
  \end{equation*}
  On elements, we have the following.
  \begin{equation*}
    \begin{tikzcd}[row sep=tiny]
      & (g\colon X \to A)
      \arrow[dd, equals, "!"]
      \\
      (g\colon X \to A)
      \arrow[ur, mapsto, "\id"]
      \arrow[dr, mapsto, swap, "- \circ \tilde{f}"]
      \\
      & (g \circ \tilde{f}\colon Y \to A)
    \end{tikzcd}
  \end{equation*}

  Thus,
  \begin{equation*}
    \mathcal{M}(A) = \coprod_{Z \in \Obj(\mathcal{A}_{\twoheadleftarrow})} \Hom(Z, A)/\sim,
  \end{equation*}
  where $\sim$ is the equivalence relation generated by the relation
  \begin{equation*}
    (g\colon X \to A) R (g'\colon X' \to A) \impliedby \exists f\colon X' \twoheadrightarrow X \text{ such that } g' = g \circ \tilde{f}.
  \end{equation*}
  The above relation is reflexive and transitive, but not symmetric. The smallest equivalence relation containing it is the following.
  \begin{equation*}
    (g\colon X \to A) \sim (g'\colon X' \to A) \iff \exists f\colon Z \twoheadrightarrow X, f'\colon Z \twoheadrightarrow X' \text{ such that } g' \circ f' = g \circ f.
  \end{equation*}
  That is, $g \sim g'$ if there exist epimorphisms making the below diagram commute.
  \begin{equation*}
    \begin{tikzcd}
      Z
      \arrow[r, twoheadrightarrow, "f"]
      \arrow[d, twoheadrightarrow, swap, "f'"]
      & X
      \arrow[d, "g"]
      \\
      X'
      \arrow[r, swap, "g'"]
      & A
    \end{tikzcd}
  \end{equation*}
\end{proof}

In summary, the elements of $\mathcal{M}(A)$ are equivalence classes of morphsims into $A$ modulo the above relation, and for a morphism $f\colon A \to B$ in $\mathcal{A}$, $\mathcal{M}(f)$ acts on an equivalence class $[g]$ by
\begin{equation*}
  \mathcal{M}(f)\colon [g] \mapsto [g \circ f].
\end{equation*}

\begin{lemma}
  \label{lemma:member_relation_zero}
  Let $f\colon A \to B$ be a morphism in a small abelian category $\mathcal{A}$ such that $f \sim 0$. Then $f = 0$.
\end{lemma}
\begin{proof}
  We have that $f \sim 0$ if and only if there exists an object $Z$ and epimorphisms making the following diagram commute.
  \begin{equation*}
    \begin{tikzcd}
      Z
      \arrow[r, twoheadrightarrow, "g"]
      \arrow[d, twoheadrightarrow]
      & A
      \arrow[d, "f"]
      \\
      0
      \arrow[r]
      & B
    \end{tikzcd}
  \end{equation*}
  But by the universal property for epimorphisms, $f \circ g = 0$ implies $f = 0$.
\end{proof}

Now we introduce some load-lightening notation: we write $\hat{(-)} = \mathcal{M}(-)$.

\begin{lemma}
  \label{lemma:member_embedding_injective_on_zero}
  Let $f\colon A \to B$ be a morphism in a small abelian category $\mathcal{A}$. Then $f = 0$ if and only if $\hat{f}\colon \hat{A} \to \hat{B} = 0$.
\end{lemma}
\begin{proof}
  Suppose that $f = 0$. Then for any $[g] \in \hat{A}$
  \begin{equation*}
    \hat{f}([g]) = [g \circ 0] = [0].
  \end{equation*}
  Thus, $\hat{f}([g]) = [0]$ for all $g$, so $\hat{f} = 0$.

  Conversely, suppose that $\hat{f} = 0$. Then in particular $\hat{f}([\id_{A}]) = [0]$. But
  \begin{equation*}
    \hat{f}([\id_{A}]) = [\id_{A} \circ f] = [f].
  \end{equation*}
  By \hyperref[lemma:member_relation_zero]{Lemma~\ref*{lemma:member_relation_zero}}, $[f] = [0]$ implies $f = 0$.
\end{proof}

\begin{corollary}
  A diagram commutes in $\mathcal{A}$ if and only if its image in $\pSet$ under $\mathcal{M}$ commutes.
\end{corollary}
\begin{proof}
  A diagram commutes in $\mathcal{A}$ if and only if any two ways of going from one object to another agree, i.e.\ if the difference of any two

  I actually don't see this right now.
\end{proof}

\begin{lemma}
  \label{lemma:member_functor_preserves_mono_epi}
  Let $f\colon A \to B$ be a morphism in a small abelian category.
  \begin{itemize}
    \item The morphism $f$ is a monomorphism if and only if $\mathcal{M}(f)$ is an
  \end{itemize}
\end{lemma}

\section{Chain complexes}
\label{ssc:chain_complexes}

\begin{definition}[category of chain complexes]
  \label{def:category_of_chain_complexes_abelian}
  Let $\mathcal{A}$ be an abelian category. A \defn{chain complex} in $\mathcal{A}$ is\dots The category of chain complexes in $\mathcal{A}$, denoted $\Ch(A)$, is the category whose objects are chain complexes and whose morphisms are morphisms of chain complexes, i.e.\dots

  We also define $\Ch^{+}(\mathcal{A})$ to be the category of \defn{bounded-below} chain complexes, $\Ch^{-}(\mathcal{A})$ to be the category of \defn{bounded-above} chain complexes, and $\Ch^{\geq 0}(\mathcal{A})$ and $\Ch^{\leq 0}(\mathcal{A})$ similarly.
\end{definition}

\begin{proposition}
  The category $\Ch(\mathcal{A})$ is abelian.
\end{proposition}
\begin{proof}
  We check each of the conditions.

  The zero object is the zero chain complex, the $\mathbf{Ab}$-enrichment is given level-wise, and the product is given level-wise as the direct sum. That this satisfies the universal property follows almost immediately from the universal property in $\mathcal{A}$: given a diagram of the form
  \begin{equation*}
    \begin{tikzcd}
      & Q_{\bullet}
      \arrow[dr, "g_{\bullet}"]
      \arrow[dl, swap, "f_{\bullet}"]
      \arrow[d, dashed, "\exists!\phi_{\bullet}"]
      \\
      C_{\bullet}
      & C_{\bullet} \times D_{\bullet}
      \arrow[r, swap, "p_{2}"]
      \arrow[l, "p_{1}"]
      & D_{\bullet}
    \end{tikzcd}
  \end{equation*}
  the only thing we need to check is that the map $\phi$ produced level-wise is really a chain map, i.e.\ that
  \begin{equation*}
    \phi_{n-1} \circ d_{n}^{Q} = d_{n}^{C} \oplus d_{n}^{D} \circ \phi_{n}.
  \end{equation*}
  By the above work, the RHS can be re-written as
  \begin{align*}
    (d^{C}_{n} \oplus d^{D}_{n}) \circ (i_{1} \circ f_{n-1} + i_{2} \circ g_{n-1}) &= i_{1} \circ d_{n}^{C} \circ f_{n} + i_{2} \circ d_{n}^{D} \circ g_{n} \\
    &= i_{1} \circ f_{n-1} \circ d^{Q}_{n} + i_{2} \circ g_{n-1} \circ d^{Q}_{n} \\
    &= (i_{1} \circ f_{n-1} + i_{2} \circ g_{n-1}) \circ d^{Q}_{n},
  \end{align*}
  which is equal to the LHS.

  The kernel is also defined level-wise. The standard diagram chase shows that the induced morphisms between kernels make this into a chain complex; to see that it satisfies the universal property, we need only show that the map $\phi$ below is a chain map.
  \begin{equation*}
    \begin{tikzcd}
      & Q_{\bullet}
      \arrow[dr, "0"]
      \arrow[d, "g_{\bullet}"]
      \arrow[dl, swap, dashed, "\phi_{\bullet}"]
      \\
      \ker(f_{\bullet})
      \arrow[r, "\iota_{\bullet}"]
      & A_{\bullet}
      \arrow[r, "f_{_{\bullet}}"]
      & B_{\bullet}
    \end{tikzcd}
  \end{equation*}
  That is, we must have
  \begin{equation}
    \label{eq:needstocommute}
    \phi_{n-1} \circ d^{Q}_{n} = d_{n}^{\ker f} \circ \phi_{n}.
  \end{equation}

  The composition
  \begin{equation*}
    \begin{tikzcd}
      Q_{n}
      \arrow[r, "g_{n}"]
      & A_{n}
      \arrow[r, "f"]
      & B_{n}
      \arrow[r, "d_{n}^{B}"]
      & B_{n-1}
    \end{tikzcd}
  \end{equation*}
  gives zero by assumption, giving us by the universal property for kernels a unique map
  \begin{equation*}
    \psi\colon Q_{n} \to \ker f_{n-1}
  \end{equation*}
  such that
  \begin{equation*}
    \iota_{n-1} \circ \psi = d^{A}_{n} \circ g_{n}.
  \end{equation*}
  We will be done if we can show that both sides of \hyperref[eq:needstocommute]{Equation~\ref*{eq:needstocommute}} can play the role of $\psi$. Plugging in the LHS, we have
  \begin{align*}
    \iota_{n-1} \circ \phi_{n-1} \circ d^{Q}_{n} &= g_{n-1} \circ d^{Q}_{n} \\
    &= d^{A}_{n} \circ g_{n}
  \end{align*}
  as we wanted. Plugging in the RHS we have
  \begin{equation*}
    \iota_{n-1} \circ d^{\ker f}_{n} \circ \phi_{n} = d^{A}_{n} \circ g_{n}.
  \end{equation*}

  The case of cokernels is dual.

  Since a chain map is a monomorphism (resp. epimorphism) if and only if it is a monomorphism (resp. epimorphism), we have immediately that monomorphisms are the kernels of their cokernels, and epimorphisms are the cokernels of their kernels.
\end{proof}

The categories $\Ch^{+}(\mathcal{A})$, etc., are also abelian.

\begin{definition}[exact sequence]
  \label{def:exact_sequence_abelian}
  Given a morphism $f\colon A \to B$, the image $\im f = \ker\coker f$ and the coimage is $\coker \ker f$. From this data, we build the following commuting diagram.
  \begin{equation*}
    \begin{tikzcd}
      & \im f
      \arrow[d, "i"]
      \arrow[dr, "0"]
      \\
      A
      \arrow[r, "f"]
      & B
      \arrow[r, "g"]
      \arrow[d, "p"]
      & C
      \\
      & \coker f
      \arrow[ur]
    \end{tikzcd}
  \end{equation*}
  Since $g \circ i = 0$, $i$ factors through $\ker g$, giving us a morphism $\phi\colon \im f \to \ker g$. We say that the above is \defn{exact} if $\phi$ is an isomorphism. We say that a complex $(C_{\bullet}, d)$ is \defn{exact} if it is exact at all positions.
\end{definition}

\begin{definition}[homology]
  \label{def:homology}
  Let $(C_{\bullet}, d)$ be a complex. The \defn{$n$th homology} of $C_{\bullet}$ is the cokernel of the map $\phi\colon \im d_{n+1} \to \ker d_{n}$ described in \hyperref[def:exact_sequence_abelian]{Definition~\ref*{def:exact_sequence_abelian}}, denoted $H_{n}(C_{\bullet})$.
\end{definition}

It is useful to have the following picture in mind.
\begin{equation*}
  \begin{tikzcd}[column sep=small]
    & \im f
    \arrow[dr, "i"]
    \arrow[r, "\phi"]
    & \ker g
    \arrow[d]
    \arrow[r]
    & H_{n}
    \\
    C_{n+1}
    \arrow[rr, "f"]
    && C_{n}
    \arrow[rr, "g"]
    \arrow[d, "p"]
    && C_{n-1}
    \\
    && \coker f
    \arrow[urr]
  \end{tikzcd}
\end{equation*}

\begin{proposition}
  Homology extends to a family of additive functors
  \begin{equation*}
    H_{n}\colon \Ch(\mathcal{A}) \to \mathcal{A}.
  \end{equation*}
\end{proposition}
\begin{proof}
  We need to define $H_{n}$ on morphisms. To this end, let $f_{\bullet}\colon C_{\bullet} \to D_{\bullet}$ be a morphism of chain complexes.
  \begin{equation*}
    \begin{tikzcd}
      C_{n+1}
      \arrow[r, "d^{C}_{n+1}"]
      \arrow[d, swap, "f_{n+1}"]
      & C_{n}
      \arrow[r, "d^{C}_{n}"]
      \arrow[d, "f_{n}"]
      & C_{n-1}
      \arrow[d, "f_{n-1}"]
      \\
      D_{n+1}
      \arrow[r, swap, "d^{D}_{n+1}"]
      & D_{n}
      \arrow[r, swap, "d^{D}_{n}"]
      & D_{n-1}
    \end{tikzcd}
  \end{equation*}
  We need a map $H_{n}(C_{\bullet}) \to H_{n}(D_{\bullet})$. This will come from a map $\ker d^{C}_{n} \to \ker d^{D}_{n}$. In fact, $f_{n}$ gives us such a map, essentially by restriction. We need to show that this descends to a map between cokernels.
\end{proof}

We can also go the other way, by defining a map
\begin{equation*}
  \iota_{n}\colon \mathcal{A} \to \Ch(\mathcal{A})
\end{equation*}
which sends an object $A$ to the chain complex
\begin{equation*}
  \begin{tikzcd}
    &{\ }
    \arrow[r, dotted]
    & 0
    \arrow[r]
    & A
    \arrow[r]
    & 0
    \arrow[r, dotted]
    &{\ }
  \end{tikzcd}
\end{equation*}
concentrated in degree $n$.

\begin{example}
  \label{eg:compute_homology_in_trivial_situation}
  In some situations, homology is easy to compute explicitly. Let
  \begin{equation*}
    \begin{tikzcd}
      \cdots
      \arrow[r]
      & C_{1}
      \arrow[r, "f"]
      & C_{0}
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  be a chain complex which is exact except in degree zero. Then $H_{0}(C_{\bullet}) = \coker f$.

  Similarly, if
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & C_{0}
      \arrow[r, "f"]
      & C_{-1}
      \arrow[r]
      & \cdots
    \end{tikzcd}
  \end{equation*}
  is a chain complex whose non-trivial homology is in degree $0$, then $H_{0}(C_{\bullet}) = \ker f$.
\end{example}

\begin{definition}[quasi-isomorphism]
  \label{def:quasi_isomorphism}
  Let $f_{\bullet}\colon C_{\bullet} \to D_{\bullet}$ be a chain map. We say that $f$ is a \defn{quasi-isomorphism} if it induces isomorphisms on homology; that is, if $H_{n}(f)$ is an isomorphism for all $n$.
\end{definition}

Quasi-isomorphisms are a fiddly concept. Since they induce isomorphisms on homology, and isomorphisms are invertible, one might naïvely hope quasi-isomorphisms themselves were invertible. Unfortunately, we are not so lucky. Consider the following

By \hyperref[eg:compute_homology_in_trivial_situation]{Example~\ref*{eg:compute_homology_in_trivial_situation}}, we

\begin{definition}[resolution]
  \label{def:resolution}
  Let $A$ be an object in an abelian category. A \defn{resolution} of $A$ consists of a chain complex $C_{\bullet}$ together with a quasi-isomorphism $C_{\bullet} \to \iota(A)$.
\end{definition}

\section{Diagram lemmas}
\label{sec:diagram_lemmas}

\subsection{The splitting lemma}
\label{ssc:the_splitting_lemma}

\begin{lemma}[Splitting lemma]
  \label{lemma:splitting_lemma}
  Consider the following solid exact sequence in an abelian category $\mathcal{A}$.
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A
      \arrow[r, "i_{A}"]
      & B
      \arrow[r, "\pi_{C}"]
      \arrow[l, bend left, dashed, "\pi_{A}"]
      & C
      \arrow[r]
      \arrow[l, bend left, dashed, "i_{C}"]
      & 0
    \end{tikzcd}
  \end{equation*}
  The following are equivalent.
  \begin{itemize}
    \item There exists a morphism $\pi_{A}\colon B \to A$ such that $\pi_{A} \circ i_{A} = \id_{A}$

    \item There exists a morphism $i_{C}\colon C \to B$ such that $\pi_{C} \circ i_{C} = \id_{C}$

    \item $B$ is a direct sum $A \oplus C$ with the obvious canonical injections and projections.
  \end{itemize}
\end{lemma}

\subsection{The snake lemma}
\label{ssc:the_snake_lemma}

\begin{lemma}
  \label{lemma:pullback_preserves_kernel}
  Let $f\colon B \twoheadrightarrow C$ be an epimorphism, and let $g\colon D \to C$ be any morphism. Then the kernel of $f$ functions as the kernel of the pullback of $f$ along $g$, in the sense that we have the following commuting diagram in which the right-hand square is a pullback square.
  \begin{equation*}
    \begin{tikzcd}
      \ker f'
      \arrow[d, equals]
      \arrow[r, "i"]
      & S
      \arrow[dr, phantom, "\ulcorner", very near start]
      \arrow[r, "f'"]
      \arrow[d, swap, "g'"]
      & D
      \arrow[d, "g"]
      \\
      \ker f
      \arrow[r, swap, "\iota"]
      & B
      \arrow[r, twoheadrightarrow, swap, "f"]
      & C
    \end{tikzcd}
  \end{equation*}
\end{lemma}
\begin{proof}
  Consider the following pullback square, where $f$ is an epimorphism.
  \begin{equation*}
    \begin{tikzcd}
      S
      \arrow[r, "f'"]
      \arrow[d, swap, "g'"]
      \arrow[dr, phantom, "\ulcorner", very near start]
      & D
      \arrow[d, "g"]
      \\
      B
      \arrow[r, twoheadrightarrow, swap, "f"]
      & C
    \end{tikzcd}
  \end{equation*}
  Since we are in an abelian category, the pullback $f'$ is also an epimorphism. Denote the kernel of $f$ by $K$.

  The claim is that $K$ also functions as the kernel of $f'$.
    %\begin{equation*}
    %  \begin{tikzcd}
    %    & S
    %    \arrow[r, "f'"]
    %    \arrow[d, swap, "g'"]
    %    & D
    %    \arrow[d, "g"]
    %    \\
    %    K
    %    \arrow[r, hookrightarrow, "\iota"]
    %    & B
    %    \arrow[r, twoheadrightarrow, swap, "f"]
    %    & C
    %  \end{tikzcd}
    %\end{equation*}
  Of course, in order for this statement to make sense we need a map $i\colon K \to S$. This is given to us by the universal property of the pullback as follows.
  \begin{equation*}
    \begin{tikzcd}
      K
      \arrow[drr, bend left, "0"]
      \arrow[ddr, bend right, swap, "\iota"]
      \arrow[dr, dashed, "\exists!i"]
      \\
      & S
      \arrow[r]
      \arrow[d]
      & D
      \arrow[d, "g"]
      \\
      & B
      \arrow[r, twoheadrightarrow, swap, "f"]
      & C
    \end{tikzcd}
  \end{equation*}
  Next we need to verify that $(K, i)$ is actually the kernel of $f'$, i.e.\ satisfies the universal property. To this end, let $v\colon Q \to S$ be a map such that $f' \circ v = 0$. We need to find a unique factorization of $v$ through $K$.
  \begin{equation*}
    \begin{tikzcd}
      & Q
      \arrow[dr, "0"]
      \arrow[d, "v"]
      \arrow[dl, swap, dashed, "\exists! v'"]
      \\
      K
      \arrow[r, "i"]
      \arrow[dr, swap, "\iota"]
      & S
      \arrow[r, twoheadrightarrow, swap, "f'"]
      \arrow[d, "g'"]
      & D
      \arrow[d, "g"]
      \\
      & B
      \arrow[r, swap, "f"]
      & C
    \end{tikzcd}
  \end{equation*}
  By definition $f' \circ v = 0$. Thus,
  \begin{align*}
    f \circ g' \circ v &= g \circ f' \circ v \\
    &= g \circ 0 \\
    &= 0,
  \end{align*}
  so $g' \circ v$ factors uniquely through $K$ as $g' \circ v = \iota \circ v'$. It remains only to check that the triangle formed by $v'$ commutes, i.e.\ $v = v' \circ i$. To see this, consider the following diagram, where the bottom right square is the pullback from before.
  \begin{equation*}
    \begin{tikzcd}
      Q
      \arrow[drr, bend left, "0"]
      \arrow[ddr, bend right, swap, "g' \circ v"]
      \arrow[dr, dashed, "\exists!"]
      \\
      & S
      \arrow[r, swap, "f'"]
      \arrow[d, "g'"]
      & D
      \arrow[d, "g"]
      \\
      & B
      \arrow[r, swap, "f"]
      & C
    \end{tikzcd}
  \end{equation*}
  By the universal property, there exists a unique map $Q \to S$ making this diagram commute. However, both $v$ and $i \circ v'$ work, so $v = i \circ v'$.

  Thus we have shown that, in a precise sense, the kernel of an epimorphism functions as the kernel of its pullback, and we have the following commutative diagram, where the right hand square is a pullback.
  \begin{equation*}
    \begin{tikzcd}
      \ker f'
      \arrow[d, equals]
      \arrow[r, "i"]
      & S
      \arrow[r, "f'"]
      \arrow[d, "g'"]
      & D
      \arrow[d, "g"]
      \\
      \ker f
      \arrow[r, swap, "\iota"]
      & B
      \arrow[r, twoheadrightarrow, swap, "f"]
      & C
    \end{tikzcd}
  \end{equation*}
\end{proof}
At least in the case that $g$ is mono, when phrased in terms of elements, this result is more or less obvious; we can imagine the diagram above as follows.
\begin{equation*}
  \begin{tikzcd}
    \left\{ \substack{\text{elements of pullback}\\\text{which map to $0$}} \right\}
    \arrow[r, hookrightarrow]
    \arrow[d, equals]
    & \left\{ \substack{\text{elements of $B$}\\\text{which map to $C$}} \right\}
    \arrow[r, twoheadrightarrow]
    \arrow[d, hookrightarrow]
    & D
    \arrow[d, hookrightarrow]
    \\
    \left\{ \substack{\text{elements of $B$}\\\text{which map to $0$}} \right\}
    \arrow[r, hookrightarrow]
    & B
    \arrow[r, twoheadrightarrow]
    & C
  \end{tikzcd}
\end{equation*}

\begin{theorem}[snake lemma]
  \label{thm:snake_lemma}
  Consider the following commutative diagram with exact rows.
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A
      \arrow[d, swap, "f"]
      \arrow[r, "m"]
      & B
      \arrow[r, "e"]
      \arrow[d, swap, "g"]
      & C
      \arrow[r]
      \arrow[d, "h"]
      & 0
      \\
      0
      \arrow[r]
      & A'
      \arrow[r, "m'"]
      & B'
      \arrow[r, "e'"]
      & C'
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  This gives us an exact sequence
  \begin{equation*}
    0 \to \ker f \to \ker g \to \ker h \to \coker f \to \coker g \to \coker h \to 0.
  \end{equation*}
\end{theorem}
\begin{proof}
  We provide running commentary on the diagram below.
  \begin{equation}
    \label{eq:snakelemma}
    \begin{tikzcd}
      0
      \arrow[r, dotted]
      & \ker f
      \arrow[r, dotted]
      \arrow[d, hookrightarrow]
      & \ker g
      \arrow[r, dotted]
      \arrow[d, hookrightarrow]
      & \ker h
      \arrow[d, hookrightarrow]
      \\
      0
      \arrow[r]
      & A
      \arrow[r, hookrightarrow, "m"]
      \arrow[d, swap, "f"]
      & B
      \arrow[r, twoheadrightarrow, "e"]
      \arrow[d, swap, "g"]
      & C
      \arrow[r]
      \arrow[d, swap, "h"]
      & 0
      \\
      0
      \arrow[r]
      & A'
      \arrow[r, hookrightarrow, swap, "m'"]
      \arrow[d, twoheadrightarrow]
      & B'
      \arrow[r, twoheadrightarrow, swap, "e'"]
      \arrow[d, twoheadrightarrow]
      & C'
      \arrow[d, twoheadrightarrow]
      \arrow[r]
      & 0
      \\
      & \coker f
      \arrow[r, dotted]
      \arrow[from=uuurr, out=-22, in=157, looseness=1.5, overlay, dashed]
      & \coker g
      \arrow[r, dotted]
      & \coker h
      \arrow[r, dotted]
      & 0
    \end{tikzcd}
  \end{equation}

  The dotted arrows come immediately from the universal property for kernels and cokernels, as do exactness at $\ker g$ and $\coker g$. The argument for kernels appeared on the previous homework sheet, and the argument for cokernels is dual.

  The only thing left is to define the dashed connecting homomorphism, and to prove exactness at $\ker h$ and $\coker f$.

    %We define the connecting homomorphism using elements, which is justified by the Freyd-Mitchell embedding theorem.
    %
    %Let $c \in \ker h$. By exactness at $C$, we can find a preimage under $ m$, which we will call $b$. We map this to $B'$ with $g$. It may seem that we are now out of luck since $e'$ is not surjective, but not to worry---applying $ m'$ we find that
    %\begin{equation*}
    %   m'(g(b)) = h( m(b)) = 0,
    %\end{equation*}
    %since $b \in \ker  m$. Thus,
    %\begin{equation*}
    %  g(b) \in \ker m' = \im e',
    %\end{equation*}
    %so we get a (unique!) preimage $a \in A'$. We send this to its image in $\coker f$.
    %\begin{equation*}
    %  \begin{tikzcd}
    %    && c
    %    \arrow[d, mapsto]
    %    \\
    %    & b
    %    \arrow[d, mapsto, "g"]
    %    & c
    %    \arrow[l, mapsto, swap, " m^{-1}"]
    %    \\
    %    a
    %    \arrow[d, mapsto]
    %    & g(b)
    %    \arrow[l, mapsto, "e'^{-1}"]
    %    \\
    %    {[a]}
    %  \end{tikzcd}
    %\end{equation*}

    %At first glance, this is not well-defined; we made a choice in picking $b$. However, it turns out that this choice doesn't matter, since the elements of $A$ we get from two different choices differ only by an element of the image of $f$, and thus are sent to the same element of the cokernel.
    %
    %To see this, suppose we had picked $b'$ such that $m'(b') = c$. Then certainly
    %\begin{equation*}
    %  m'(b - b') = c - c = 0,
    %\end{equation*}
    %so there is an $\tilde{a} \in A'$ such that
    %\begin{equation*}
    %  e'(\tilde{a}) = b - b'.
    %\end{equation*}
    %Define $a' = a-$

  Extract from the data of \hyperref[eq:snakelemma]{Diagram~\ref*{eq:snakelemma}} the following diagram.
  \begin{equation*}
    \begin{tikzcd}
      && \ker h
      \arrow[d, hookrightarrow]
      \\
      A
      \arrow[d, swap, "f"]
      \arrow[r, hookrightarrow, "m"]
      & B
      \arrow[r, twoheadrightarrow, "e"]
      \arrow[d, "g"]
      & C
      \arrow[d, "h"]
      \\
      A'
      \arrow[r, hookrightarrow, swap, "m'"]
      \arrow[d, twoheadrightarrow]
      & B'
      \arrow[r, swap, twoheadrightarrow, "e'"]
      & C'
      \\
      \coker f
    \end{tikzcd}
  \end{equation*}
  Take a pullback and a pushout, and using \hyperref[lemma:pullback_preserves_kernel]{Lemma~\ref*{lemma:pullback_preserves_kernel}} (and its dual), we find the following.
  \begin{equation*}
    \begin{tikzcd}
      \ker u
      \arrow[r, hookrightarrow, "a"]
      \arrow[d, equals]
      & S
      \arrow[r, twoheadrightarrow, "u"]
      \arrow[d, "r"]
      & \ker h
      \arrow[d, hookrightarrow]
      \\
      A
      \arrow[d, swap, "f"]
      \arrow[r, hookrightarrow, "m"]
      & B
      \arrow[r, twoheadrightarrow, "e"]
      \arrow[d, "g"]
      & C
      \arrow[d, "h"]
      \\
      A'
      \arrow[r, hookrightarrow, "m'"]
      \arrow[d, twoheadrightarrow]
      & B'
      \arrow[r, twoheadrightarrow, "e'"]
      \arrow[d, "s"]
      & C'
      \arrow[d, equals]
      \\
      \coker f
      \arrow[r, hookrightarrow, swap, "v"]
      & T
      \arrow[r, twoheadrightarrow, swap, "b"]
      & \coker v
    \end{tikzcd}
  \end{equation*}
  Consider the map
  \begin{equation*}
    \delta_{0} =
    \begin{tikzcd}
      S
      \arrow[r, "r"]
      & B
      \arrow[r, "g"]
      & B'
      \arrow[r, "s"]
      & T
    \end{tikzcd}.
  \end{equation*}

  By commutativity, $\delta \circ a = 0$, hence we get a map
  \begin{equation*}
    \delta_{1}\colon \ker h \to T.
  \end{equation*}
  Composing this with $b$ gives $0$, hence we get a map
  \begin{equation*}
    \delta\colon \coker f \to \ker h.
  \end{equation*}
\end{proof}

There is another version of the snake lemma which does not have the first and last zeroes.
\begin{theorem}[snake lemma II]
  \label{thm:snake_lemma_ii}
  Given the following commutative diagram with exact rows,
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A
      \arrow[d, swap, "f"]
      \arrow[r, "m"]
      & B
      \arrow[r, "e"]
      \arrow[d, swap, "g"]
      & C
      \arrow[r]
      \arrow[d, "h"]
      & 0
      \\
      0
      \arrow[r]
      & A'
      \arrow[r, "m'"]
      & B'
      \arrow[r, "e'"]
      & C'
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  we get a exact sequence
  \begin{equation*}
    \ker f \to \ker g \to \ker h \to \coker f \to \coker g \to \coker h.
  \end{equation*}
\end{theorem}

\subsection{The long exact sequence on homology}
\label{ssc:the_long_exact_sequence_on_homology}

\begin{corollary}
  \label{cor:long_exact_sequence_on_homology}
  Given an exact sequence of complexes
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A_{\bullet}
      \arrow[r, "f_{\bullet}"]
      & B_{\bullet}
      \arrow[r, "g_{\bullet}"]
      & C_{\bullet}
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  we get a long exact sequence on homology
  \begin{equation*}
    \begin{tikzcd}
      & \cdots
      \arrow[r]
      & H_{n+1}(C)
      \\
      H_{n}(A)
      \arrow[from=urr, out=-22, in=157, looseness=1, overlay, "\delta" description]
      \arrow[r, "H_{n}(f)"]
      & H_{n}(B)
      \arrow[r, "H_{n}(g)"]
      & H_{n}(C)
      \\
      H_{n-1}(A)
      \arrow[from=urr, out=-22, in=157, looseness=1, overlay, "\delta" description]
      \arrow[r, "H_{n-1}(f)"]
      & H_{n-1}(B)
      \arrow[r, "H_{n-1}(g)"]
      & H_{n-1}(C)
      \\
      H_{n-2}(A)
      \arrow[from=urr, out=-22, in=157, looseness=1, overlay, "\delta" description]
      \arrow[r]
      & \cdots
    \end{tikzcd}
  \end{equation*}
\end{corollary}
\begin{proof}
  For each $n$, we have a diagram of the following form.
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A_{n+1}
      \arrow[r]
      \arrow[d, swap, "d^{A}_{n+1}"]
      & B_{n+1}
      \arrow[r]
      \arrow[d, "d^{B}_{n+1}"]
      & C_{n+1}
      \arrow[r]
      \arrow[d, "d^{C}_{n+1}"]
      & 0
      \\
      0
      \arrow[r]
      & A_{n}
      \arrow[r]
      & B_{n}
      \arrow[r]
      & C_{n}
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  Applying the snake lemma (\hyperref[thm:snake_lemma]{Theorem~\ref*{thm:snake_lemma}}) gives us, for each $n$, two exact sequences as follows.
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & \ker d^{A}_{n+1}
      \arrow[r]
      & \ker d^{B}_{n+1}
      \arrow[r]
      & \ker d^{C}_{n+1}
    \end{tikzcd}
  \end{equation*}
  and
  \begin{equation*}
    \begin{tikzcd}
      \coker d^{A}_{n}
      \arrow[r]
      & \coker d^{B}_{n}
      \arrow[r]
      & \coker d^{C}_{n}
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}

  We can put these together in a diagram with exact rows as follows.
  \begin{equation*}
    \begin{tikzcd}
      & \coker f_{n+1}
      & \coker g_{n+1}
      & \coker h_{n+1}
      & 0
      \\
      0
      & \ker f_{n}
      & \ker g_{n}
      & \ker h_{n}
    \end{tikzcd}
  \end{equation*}
  Recall that for each $n$, we get a map
  \begin{equation*}
    \phi\colon \im f_{n+1} \to \ker f_{n}
  \end{equation*}
\end{proof}

\begin{lemma}
  \label{lemma:connecting_homomorphism_is_functorial}
  Let $\mathcal{A}$ be an abelian category, and let $f$ be a morphism of short exact sequences in $\Ch(\mathcal{A})$ as below.
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A'_{\bullet}
      \arrow[r, "\alpha_{\bullet}"]
      \arrow[d, "f'_{\bullet}"]
      & A_{\bullet}
      \arrow[r, "\alpha'_{\bullet}"]
      \arrow[d, "f_{\bullet}"]
      & A''_{\bullet}
      \arrow[r]
      \arrow[d, "f''_{\bullet}"]
      & 0
      \\
      0
      \arrow[r]
      & B'_{\bullet}
      \arrow[r, swap, "\beta_{\bullet}"]
      & B_{\bullet}
      \arrow[r, swap, "\beta'_{\bullet}"]
      & B''_{\bullet}
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}

  This gives us the following morphism of long exact sequences on homology.
  \begin{equation*}
    \begin{tikzcd}
      \cdots
      \arrow[r]
      & H_{n}(A)
      \arrow[r, "H_{n}(\alpha')"]
      \arrow[d, swap, "H_{n}(f)"]
      & H_{n}(A'')
      \arrow[r, "\delta"]
      \arrow[d, "H_{n}(f'')"]
      & H_{n-1}(A')
      \arrow[r, "H_{n-1}(\alpha)"]
      \arrow[d, "H_{n}(f')"]
      & H_{n-1}(A)
      \arrow[d, "H_{n}(f)"]
      \arrow[r]
      & \cdots
      \\
      \cdots
      \arrow[r]
      & H_{n}(B)
      \arrow[r, "H_{n}(\beta')"]
      & H_{n}(B'')
      \arrow[r, "\delta"]
      & H_{n-1}(B')
      \arrow[r, "H_{n-1}(\beta)"]
      & H_{n-1}(B)
      \arrow[r]
      & \cdots
    \end{tikzcd}
  \end{equation*}
  In particular, the connecting morphism $\delta$ is functorial.
\end{lemma}

\subsection{The five lemma}
\label{ssc:the_five_lemma}

\begin{lemma}[four lemmas]
  \label{lemma:four_lemmas}
  Let
  \begin{equation*}
    \begin{tikzcd}
      B
      \arrow[r]
      \arrow[d, two heads]
      & C
      \arrow[r]
      \arrow[d]
      & D
      \arrow[r]
      \arrow[d, two heads]
      & E
      \arrow[d, hook]
      \\
      B'
      \arrow[r]
      & C'
      \arrow[r]
      & D'
      \arrow[r]
      & E'
    \end{tikzcd}
  \end{equation*}
  be a commutative diagram with exact rows, with monomorphisms and epimorphisms as marked. Then 
\end{lemma}

\begin{theorem}[five lemma]
  \label{thm:five_lemma}

\end{theorem}

\subsection{The nine lemma}
\label{ssc:the_nine_lemma}

\begin{theorem}[nine lemma]
  \label{thm:nine_lemma}
\end{theorem}

\chapter{Homological algebra in abelian categories}
\label{ch:homological_algebra_in_abelian_categories}

\section{Exactness in abelian categories}
\label{sss:exactness_in_abelian_categories}

\begin{definition}[exact functor]
  \label{def:exact_functor}
  Let $F\colon \mathcal{A} \to \mathcal{B}$ be an additive functor, and let
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A
      \arrow[r, "f"]
      & B
      \arrow[r, "g"]
      & C
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  be an exact sequence. We use the following terminology.
  \begin{itemize}
    \item We call $F$ \defn{left exact} if
      \begin{equation*}
        \begin{tikzcd}
          0
          \arrow[r]
          & F(A)
          \arrow[r, "f"]
          & F(B)
          \arrow[r, "g"]
          & F(C)
        \end{tikzcd}
      \end{equation*}
      is exact

    \item We call $F$ \defn{right exact} if
      \begin{equation*}
        \begin{tikzcd}
          F(A)
          \arrow[r, "f"]
          & F(B)
          \arrow[r, "g"]
          & F(C)
          \arrow[r]
          & 0
        \end{tikzcd}
      \end{equation*}
      is exact

    \item We call $F$ \defn{exact} if it is both left exact and right exact.
  \end{itemize}
\end{definition}

\begin{example}
  We showed in \hyperref[prop:hom_functor_left_exact]{Lemma~\ref*{prop:hom_functor_left_exact}} that both hom functors $\Hom(A, -)$ and $\Hom(-, B)$ are left exact.
\end{example}

According to the Yoneda lemma, to check that two objects are isomorphic it suffices to check that their images under the Yoneda embedding are isomorphic. In the context of abelian categories, the following result shows that we can also check the exactness of a sequence by checking the exactness of the image of the sequence under the Yoneda embedding.

\begin{lemma}
  \label{lemma:yoneda_reflects_exactness}
  Let $\mathcal{A}$ be an abelian category, and let
  \begin{equation*}
    \begin{tikzcd}
      A
      \arrow[r, "f"]
      & B
      \arrow[r, "g"]
      & C
    \end{tikzcd}
  \end{equation*}
  be objects and morphisms in $\mathcal{A}$. If for all $X$ the abelian groups and homomorphisms
  \begin{equation*}
    \begin{tikzcd}
      \Hom_{\mathcal{A}}(X, A)
      \arrow[r, "f_{*}"]
      & \Hom_{\mathcal{A}}(X, B)
      \arrow[r, "g_{*}"]
      & \Hom_{\mathcal{A}}(X, C)
    \end{tikzcd}
  \end{equation*}
  form an exact sequence of abelian groups, then $A \to B \to C$ is exact.
\end{lemma}
\begin{proof}
  To see this, take $X = A$, giving the following sequence.
  \begin{equation*}
    \begin{tikzcd}
      \Hom_{\mathcal{A}}(A, A)
      \arrow[r, "f_{*}"]
      & \Hom_{\mathcal{A}}(A, B)
      \arrow[r, "g_{*}"]
      & \Hom_{\mathcal{A}}(A, C)
    \end{tikzcd}
  \end{equation*}
  Exactness implies that
  \begin{equation*}
    0 = (g_{*} \circ f_{*})(\id) = (g \circ f)(\id) = g \circ f,
  \end{equation*}
  so $\im f \subset \ker g$. Now take $X = \ker g$.
  \begin{equation*}
    \begin{tikzcd}
      \Hom_{\mathcal{A}}(\ker g, A)
      \arrow[r, "f_{*}"]
      & \Hom_{\mathcal{A}}(\ker g, B)
      \arrow[r, "g_{*}"]
      & \Hom_{\mathcal{A}}(\ker g, C)
    \end{tikzcd}
  \end{equation*}
  The canonical inclusion $\iota\colon \ker g \to B$ is mapped to zero under $g_{*}$, hence is mapped to under $f_{*}$ by some $\alpha\colon \ker g \to A$. That is, we have the following commuting triangle.
  \begin{equation*}
    \begin{tikzcd}[column sep=small]
      & A
      \arrow[dr, "f"]
      \\
      \ker g
      \arrow[ur, "\alpha"]
      \arrow[rr, hookrightarrow, swap, "\iota"]
      && B
    \end{tikzcd}
  \end{equation*}
  Thus $\im \iota = \ker g \subset \im f$.
\end{proof}

\begin{proposition}
  \label{prop:exact_if_preserve_limits_conditions}
  Let $F\colon \mathcal{A} \to \mathcal{B}$ be a functor between abelian categories.
  \begin{itemize}
    \item If $F$ preserves finite limits, then $F$ is left exact.

    \item If $F$ preserves finite colimits, then $F$ is right exact.
  \end{itemize}
\end{proposition}
\begin{proof}
  Let $f\colon A \to B$ be a morphism in an abelian category. The universal property for the kernel of $f$ is equivalent to the following: $(K, \iota)$ is a kernel of $f$ if and only if the following diagram is a pullback.
  \begin{equation*}
    \begin{tikzcd}
      K
      \arrow[r]
      \arrow[d, swap, "\iota"]
      & 0
      \arrow[d]
      \\
      A
      \arrow[r, swap, "f"]
      & B
    \end{tikzcd}
  \end{equation*}
  Any functor between abelian categories which preserves limits must in particular preserve pullbacks. Any such functor also sends initial objects to initial objects, and since initial objects are zero objects, such a functor preserves zero objects. Thus, any complete functor between abelian categories takes kernels to kernels.

  Dually, any functor which preserves colimits preserves cokernels.

  Next, note that the exactness of the sequence
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A
      \arrow[r, "f"]
      & B
      \arrow[r, "g"]
      & C
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  is equivalent to the following three conditions.
  \begin{enumerate}
    \item Exactness at $A$ means that $f$ is mono, i.e.\ $0 \to A$ is a kernel of $f$.

    \item Exactness at $B$ means that $\im f = \ker g$.
      \begin{itemize}
        \item If $f$ is mono, this is equivalent to demanding that $(A, f)$ is a kernel of $g$.

        \item If $g$ is epi, this is equivalent to demanding that $(C, g)$ is a cokernel of $f$.
      \end{itemize}

    \item Exactness at $C$ means that $g$ is epi, i.e.\ $C \to 0$ is a cokernel of $g$.
  \end{enumerate}
  Any functor $G$ which is a right adjoint preserves limits. By the above reasoning, $G$ certainly preserves zero objects and kernels. Thus, $G$ preserves the first two conditions, which means precisely that $G$ is left exact.

  Dually, any functor $F$ which is a left adjoint preserves colimits, hence zero objects and cokernels. Thus, $F$ preserves the last two conditions, which means that $F$ is right exact.
\end{proof}

Note that the previous theorem makes no demand that $F$ be additive, which may seem surprising; after all, by  \hyperref[def:exact_functor]{Definition~\ref*{def:exact_functor}}, only exact funcotors are allowed the honor of being called additive. However, it turns out that a functor which preserves either finite limits or finite colimits is always additive. To see this, note that by applying any functor which is either left or right exact to a split exact sequence gives a split exact sequence.

This is often useful when trying to check the exactness of a functor which is a left or right adjoint, by the following proposition.

\begin{lemma}
  \label{cor:hom_functor_left_exact}
  Let
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A
      \arrow[r, "f"]
      & B
      \arrow[r, "g"]
      & C
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  be an exact sequence, and let $X$ be any object. Then the sequence
  \begin{corollary}
    \begin{tikzcd}
      0
      \arrow[r]
      & \Hom(X, A)
      \arrow[r, "f_{*}"]
      & \Hom(X, B)
      \arrow[r, "g_{*}"]
      & \Hom(X, C)
    \end{tikzcd}
  \end{corollary}
  is an exact sequence of abelian groups.
\end{lemma}
\begin{proof}
  The hom functor
\end{proof}

\section{Chain Homotopies}
\label{sec:chain_homotopies}

\begin{definition}[chain homotopy]
  \label{def:chain_homotopy}
  Let $f_{\bullet}$, $g_{\bullet}\colon C_{\bullet} \to D_{\bullet}$ be morphisms of chain complexes. A \defn{chain homotopy}
\end{definition}

\begin{lemma}
  \label{lemma:additive_functors_preserve_homotopy}
  Let $f_{\bullet}$, $g_{\bullet}\colon C_{\bullet} \to D_{\bullet}$ be a homotopic chain complexes via a homotopy $h$, and let $F$ be an additive functor. Then $F(h)$ is a homotopy between $F(f_{\bullet})$ and $F(g_{\bullet})$.
\end{lemma}
\begin{proof}
  We have
  \begin{equation*}
    df + fd = h,
  \end{equation*}
  so
  \begin{equation*}
    F(d)F(f) + F(f)F(d) = F(h).
  \end{equation*}
\end{proof}

\begin{lemma}
  \label{lemma:homotopy_equivalence_relation}
  Homotopy of morphisms is an equivalence relation.
\end{lemma}
\begin{proof}
  \leavevmode
  \begin{itemize}
    \item Reflexivity: the zero morphism provides a homotopy between $f \sim f$.

    \item Symmetry: If $f \overset{h}{\sim} g$, then $g \overset{-h}{\sim} f$

    \item Transitivity: If $f \overset{h}{\sim} f'$ and $f' \overset{h'}{\sim} f''$, then $f \overset{h + h'}{\sim} f''$.
  \end{itemize}
\end{proof}

\begin{lemma}
  \label{lemma:homotopy_respects_composition}
  Homotopy respects composition. That is, let $f \overset{h}{\sim} g$ be homotopic morphisms, and let $r$ be another morphism with appropriate domain and codomain.
  \begin{itemize}
    \item $f \circ r \overset{hr}{\sim} g \circ r$

    \item $r \circ f \overset{rh}{\sim} r \circ g$.
  \end{itemize}
\end{lemma}
\begin{proof}
  Obvious.
\end{proof}

\begin{definition}[homotopy category]
  \label{def:homotopy_category}
  Let $\mathcal{A}$ be an abelian category. The \defn{homotopy category} $\mathcal{K}(\mathcal{A})$, is the category whose objects are those of $\Ch(\mathcal{A})$, and whose morphisms are equivalence classes of morphisms in $\mathcal{A}$ up to homotopy.
\end{definition}

\begin{lemma}
  \label{lemma:homotopy_category_is_additive}
  The homotopy category $\mathcal{K}(\mathcal{A})$ is an additive category, and the quotienting functor $\Ch(\mathcal{A}) \to \mathcal{K}(\mathcal{A})$ is an additive functor.
\end{lemma}
\begin{proof}
  Trivial.
\end{proof}

In fact, the homotopy category satisfies the following universal property.

\begin{proposition}
  Let $F\colon \Ch(\mathcal{A}) \to \mathcal{C}$ be an additive functor such that $\mathcal{F}(f)$ is an isomorphism for all quasi-isomorphisms $f$. Then there exists a unique functor $\mathcal{K}(\mathcal{A}) \to \mathcal{C}$ making the following diagram commute.
\end{proposition}

\begin{proposition}
  \label{prop:additive_functors_from_derived_category_squash_homotopies}
  Let $\mathcal{F}\colon \Ch(\mathcal{A}) \to \mathcal{B}$ be an additive functor which takes quasi-isomorphisms to isomorphisms. Then for homotopic morphisms $f \sim g$ in $\Ch(\mathcal{A})$, we have $F(f) = F(g)$.
\end{proposition}

\section{Projectives and injectives}
\label{ssc:projectives_and_injectives}

\begin{definition}[projective, injective]
  \label{def:projective_injective}
  An object $P$ in an abelian category is said to be \defn{projective} if the functor $\Hom(P, -)$ is exact, and \defn{injective} if $\Hom(-, Q)$ is exact.
\end{definition}

Since the hom functor $\Hom(A, -)$ is left exact for every $A$, it is very easy to see that an object $P$ in an abelian category $\mathcal{A}$ is projective if for every epimorphism $f\colon B \to C$ and every morphism $p\colon P \to C$, there exists a morphism $\tilde{p}\colon P \to B$ such that the following diagram commutes.
\begin{equation*}
  \begin{tikzcd}
    & P
    \arrow[d, "p"]
    \arrow[dl, dashed, swap, "\exists\tilde{p}"]
    \\
    B
    \arrow[r, twoheadrightarrow, swap, "f"]
    & C
  \end{tikzcd}
\end{equation*}

Dually, $Q$ is injective if for every monomorphism $g\colon A \to B$ and every morphism $q\colon A \to Q$ there exists a morphism $\tilde{q}\colon B \to Q$ such that the following diagram commutes.
\begin{equation*}
  \begin{tikzcd}
    A
    \arrow[r, hookrightarrow, "g"]
    \arrow[d, swap, "q"]
    & B
    \arrow[dl, dashed, "\exists \tilde{q}"]
    \\
    Q
  \end{tikzcd}
\end{equation*}

\begin{definition}[enough projectives]
  \label{def:enough_projectives}
  Let $\mathcal{A}$ be an abelian category. We say that $\mathcal{A}$ has \defn{enough projectives} if for every object $M$ there exists a projective object $P$ and an epimorphism $P \twoheadrightarrow M$.
\end{definition}

\begin{proposition}
  Let
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A
      \arrow[r, hookrightarrow]
      & B
      \arrow[r, twoheadrightarrow, "f"]
      & P
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  be a short exact sequence with $P$ projective. Then the sequence splits.
\end{proposition}
\begin{proof}
  We can add another copy of $P$ artfully as follows.
\begin{equation*}
    \begin{tikzcd}
      &&& P
      \arrow[d, "\id"]
      \\
      0
      \arrow[r]
      & A
      \arrow[r, hookrightarrow]
      & B
      \arrow[r, twoheadrightarrow, "f"]
      & P
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  By definition, we get a morphism $P \to B$ making the triangle commute.
  \begin{equation*}
    \begin{tikzcd}
      &&& P
      \arrow[d, "\id"]
      \arrow[dl, swap, "\exists g"]
      \\
      0
      \arrow[r]
      & A
      \arrow[r, hookrightarrow]
      & B
      \arrow[r, twoheadrightarrow, swap, "f"]
      & P
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  But this says precisely that $f \circ g = \id_{P}$, i.e.\ the sequence splits from the right. The result follows from the splitting lemma (\hyperref[lemma:splitting_lemma]{Lemma~\ref*{lemma:splitting_lemma}}).
\end{proof}

\begin{corollary}
  Let $F$ be an additive functor, and let
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & A
      \arrow[r, hookrightarrow]
      & B
      \arrow[r, twoheadrightarrow, "f"]
      & P
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  be an exact sequence with $P$ projective. Then $F$ applied to the sequence gives an exact sequence.
\end{corollary}
\begin{proof}
  Applying $F$ to a split sequence gives a split sequence, and all split sequences are exact.
\end{proof}

\begin{corollary}
  The category $\Rmod$ has enough projectives.
\end{corollary}
\begin{proof}
  By \hyperref[prop:projectives_are_direct_summands_of_free]{Proposition~\ref*{prop:projectives_are_direct_summands_of_free}}, free modules are projective, and every module is a quotient of a free module.
\end{proof}

\begin{proposition}
  Let $\mathcal{A}$ be an abelian category with enough projectives. Then every object $A \in \mathcal{A}$ has a projective resolution.

  Dually, any abelian category with enough injectives has injective resolutions.
\end{proposition}
\begin{proof}
  We provide running commentary on the following diagram.
\end{proof}

\begin{definition}[projective, injective resolution]
  \label{def:projective_injective_resolution}
  Let $\mathcal{A}$ be an abelian category, and let $A \in \mathcal{A}$. A \defn{projective resolution} of $A$ is a quasi-isomorphism $P_{\bullet} \to \iota(A)$, where $P_{\bullet}$ is a complex of projectives. Similarly, an \defn{injective resolution} is a quasi-isomorphism $\iota(A) \to Q_{\bullet}$ where $Q_{\bullet}$ is a complex of injectives.
\end{definition}

\begin{lemma}
  \label{lemma:projective_resolution_epimorphism}
  Let $f\colon P_{\bullet} \to \iota(M)$ be a projective resolution. Then $f\colon P_{0} \to M$ is an epimorphism.
\end{lemma}
\begin{proof}
  We know that $H_{0}(f)\colon H_{0}(P) \to H_{0}(\iota (M))$ is an isomorphism. But $H_{0}(\iota(m)) \simeq \iota_{M}$, and that
\end{proof}

In fact, we can say more.

\begin{lemma}
  \label{lemma:equivalent_characterization_of_projective_resolution}
  Let $f_{\bullet}\colon P_{\bullet} \to \iota(A)$ be a chain map. Then $f$ is a projective resolution if and only if the sequence
  \begin{equation*}
    \begin{tikzcd}
      \
      \arrow[r, dotted, no head]
      & P_{2}
      \arrow[r]
      & P_{1}
      \arrow[r]
      & P_{0}
      \arrow[r, "f_{0}"]
      & A
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  is exact.
\end{lemma}

\begin{theorem}[extended horseshoe lemma]
  \label{thm:extended_horseshoe_lemma}
  Let $\mathcal{A}$ be an abelian category with enough projectives, and let $P'_{\bullet} \to M'$ and $P''_{\bullet} \to M''$ be projective resolutions. Then given an exact sequence
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & M'
      \arrow[r, "f"]
      & M
      \arrow[r, "g"]
      & M''
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  there is a projective resolution $P_{\bullet} \to M$ and maps $\tilde{f}$ and $\tilde{g}$ such that the following diagram has exact rows and commutes.
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & P'_{\bullet}
      \arrow[r, "\tilde{f}"]
      \arrow[d]
      & P_{\bullet}
      \arrow[r, "\tilde{g}"]
      \arrow[d]
      & P''_{\bullet}
      \arrow[r]
      \arrow[d]
      & 0
      \\
      0
      \arrow[r]
      & M'
      \arrow[r, swap, "f"]
      & M
      \arrow[r, swap, "\tilde{g}"]
      & M''
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}

  Furthermore, given a morphism $M \to N$
\end{theorem}
\begin{proof}
  We construct $P_{\bullet}$ inductively. We have specified data of the following form.
  \begin{equation*}
    \begin{tikzcd}
      \
      & \
      \arrow[d, dotted, no head]
      & \
      & \
      \arrow[d, dotted, no head]
      & \
      \\
      0
      \arrow[r]
      & P'_{1}
      \arrow[d]
      && P''_{1}
      \arrow[r]
      \arrow[d]
      & 0
      \\
      0
      \arrow[r]
      & P'_{0}
      \arrow[d]
      && P''_{0}
      \arrow[r]
      \arrow[d]
      & 0
      \\
      0
      \arrow[r]
      & M'
      \arrow[r, "f"]
      & M
      \arrow[r, "g"]
      & M''
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  We define $P_{0} = P'_{0} \oplus P''_{0}$. We get the maps to and from $P_{0}$ from the canonical injection and projection respectively.
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & P'_{0}
      \arrow[r, "\iota"]
      \arrow[dr, dashed, swap, "f \circ p'_{0}"]
      \arrow[d, swap, "p'"]
      & P'_{0} \oplus P''_{0}
      \arrow[r, "\pi"]
      \arrow[d, dotted, "p"]
      & P''_{0}
      \arrow[r]
      \arrow[d, "p''"]
      \arrow[dl, dashed, "\exists q"]
      & 0
      \\
      0
      \arrow[r]
      & M'
      \arrow[r, swap, "f"]
      & M
      \arrow[r, swap, "g"]
      & M''
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  We get the (dashed) map $P'_{0} \to M$ by composition, and the (dashed) map $P''_{0} \to M$ by projectivity of $P''_{0}$ (since by \hyperref[lemma:projective_resolution_epimorphism]{Lemma~\ref*{lemma:projective_resolution_epimorphism}} $p''$ is an epimorphism). From these the universal property for coproducts gives us the (dotted) map $p\colon P'_{0} \oplus P''_{0} \to M$.

  At this point, the innocent reader may believe that we are in the clear, and indeed many books leave it at this. Not so! We don't know that the diagram formed in this way commutes. In fact it does not; there is nothing in the world that tells us that $q \circ \pi = p$.

  However, this is but a small transgression, since the \emph{squares} which are formed still commute. To see this, note that we can write
  \begin{equation*}
    p = f \circ p'_{0} \circ \pi_{P_{0}'} + q \circ \pi;
  \end{equation*}
  composing this with

  The snake lemma guarantees that the sequence
  \begin{equation*}
    \begin{tikzcd}
      \coker p' \simeq 0
      \arrow[r]
      & \coker p
      \arrow[r]
      & 0 \simeq \coker p''
    \end{tikzcd}
  \end{equation*}
  is exact, hence that $p$ is an epimorphism.

  One would hope that we could now repeat this process to build further levels of $P_{\bullet}$. Unfortunately, this doesn't work because we have no guarantee that $d^{P''}_{1}$ is an epimorphism, so we can't use the projectiveness of $P''_{1}$ to produce a lift. We have to be clever.

  The trick is to add an auxiliary row of kernels; that is, to expand the relevant portion of our diagram as follows.
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & P'_{1}
      \arrow[d, swap, "p_{1}'"]
      && P''_{1}
      \arrow[r]
      \arrow[d, "p_{1}''"]
      & 0
      \\
      0
      \arrow[r]
      & \ker p'
      \arrow[r]
      \arrow[d]
      & \ker p
      \arrow[r]
      \arrow[d]
      & \ker p''
      \arrow[r]
      \arrow[d]
      & 0
      \\
      0
      \arrow[r]
      & P'_{0}
      \arrow[r]
      & P_{0}
      \arrow[r]
      & P''_{0}
      \arrow[r]
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  The maps $p'_{1}$ and $p''_{1}$ come from the exactness of $P'_{\bullet}$ and $P''_{\bullet}$. In fact, they are epimorphisms, because they are really cokernel maps in disguise. That means that we are in the same situation as before, and are justified in saying ``we proceed inductively''.
\end{proof}

\begin{proposition}
  \label{prop:can_lift_morphisms_to_projective_resolutions}
  Let $\mathcal{A}$ be an abelian category, let $M$ and $M'$ be objects of $\mathcal{A}$, and
  \begin{equation*}
    P_{\bullet} \to M \qquad\text{and}\qquad P'_{\bullet} \to M'
  \end{equation*}
  be projective resolutions. Then for every morphism $f\colon M \to M'$ there exists a lift $\tilde{f}\colon P_{\bullet} \to P'_{\bullet}$ making the diagram
  \begin{equation*}
    \begin{tikzcd}
      P_{\bullet}
      \arrow[r, "\tilde{f}_{\bullet}"]
      \arrow[d]
      & P'_{\bullet}
      \arrow[d]
      \\
      \iota M
      \arrow[r, swap, "\iota f"]
      & \iota M'
    \end{tikzcd}
  \end{equation*}
  commute, which is unique up to homotopy.
\end{proposition}
\begin{proof}
  We construct a lift inductively.
\end{proof}

\begin{corollary}
  \label{cor:projective_resolution_functor}
  For any abelian category with enough projectives, there are projective resolution functors $\mathcal{A} \to \mathcal{K}(\Ch_{\geq 0}\mathcal{A})$.
\end{corollary}

\section{Mapping cones}
\label{sec:mapping_cones}

\begin{definition}[shift functor]
  \label{def:shift_functor}
  For any chain complex $C_{\bullet}$ and any $k \in \Z$, define the \defn{$k$-shifted chain complex} $C_{\bullet}[k]$ by
  \begin{equation*}
    C[k]_{i} = C_{k+i};\qquad d^{C[k]}_{i} = (-1)^{k}d^{C}_{i+k}.
  \end{equation*}
\end{definition}

\begin{definition}[mapping cone]
  \label{def:mapping_cone}
  Let $f\colon C_{\bullet} \to D_{\bullet}$ be a chain map. Define a new complex $\cone(f)$ as follows.
  \begin{itemize}
    \item For each $n$, define
      \begin{equation*}
        \cone(f)_{n} = C_{n-1} \oplus D_{n}.
      \end{equation*}

    \item Define $d^{\cone(f)}_{n}$ by
      \begin{equation*}
        d^{\cone(f)}_{n} =
        \begin{pmatrix}
          -d^{C}_{n-1} & 0 \\
          -f_{n-1} & d^{D}_{n}
        \end{pmatrix},
      \end{equation*}
      which is shorthand for
      \begin{equation*}
        d^{\cone(f)}_{n}(x_{n-1}, y_{n}) = (-d^{C}_{n-1}x_{n-1}, d^{D}_{n}y_{n} - f_{n-1}x_{n-1}).
      \end{equation*}
  \end{itemize}
\end{definition}

\begin{lemma}
  \label{lemma:cone_fits_into_ses}
  The complex $\cone(f)$ naturally fits into a short exact sequence
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & C_{\bullet}
      \arrow[r, "\iota"]
      & \cone(f)_{\bullet}
      \arrow[r, "\pi"]
      & D_{\bullet}
      \arrow[r]
      & 0
    \end{tikzcd}.
  \end{equation*}
\end{lemma}
\begin{proof}
  We need to specify $\iota$ and $\pi$. The morphism $\iota$ is the usual injection; the morphism $\pi$ is given by minus the usual projection.
\end{proof}

\begin{corollary}
  \label{cor:cone_controls_quasi_isomorphism}
  Let $f_{\bullet}\colon C_{\bullet} \to D_{\bullet}$ be a morphism of chain complexes. Then $f$ is a quasi-isomorphism if and only if $\cone(f)$ is an exact complex.
\end{corollary}
\begin{proof}
  By \hyperref[cor:long_exact_sequence_on_homology]{Corollary~\ref*{cor:long_exact_sequence_on_homology}}, we get a long exact sequence
  \begin{equation*}
    \cdots \to  H_{n}(X) \overset{\delta}{\to} H_{n}(Y) \to H_{n}(\cone(f)) \to H_{n-1}(X) \to \cdots.
  \end{equation*}

  We still need to check that $\delta = H_{n}(f)$. This is not hard to see (although I'm missing a sign somewhere); picking $x \in \ker d^{X}$, the zig-zag defining $\delta$ goes as follows.
  \begin{equation*}
    \begin{tikzcd}
      && x
      \arrow[d, mapsto]
      \\
      & (x, 0)
      \arrow[r, mapsto]
      \arrow[d, mapsto]
      & -x
      \\
      f(x)
      \arrow[r, mapsto]
      \arrow[d, mapsto]
      & (0, f(x))
      \\
      {[f(x)]}
    \end{tikzcd}
  \end{equation*}
  If $\cone(f)$ is exact, then we get a very short exact sequence
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & H_{n}(X)
      \arrow[r, "H_{n}(f)"]
      & H_{n}(Y)
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  implying that $H_{n}(f)$ must be an isomorphism. Conversely, if $H_{n}(f)$ is an isomorphism for all $n$, then the maps to and from $H_{n}(\cone(f))$ must be the zero maps, implying $H_{n}(\cone(f)) = 0$ by exactness.
\end{proof}

\begin{proposition}
  Let $\mathcal{A}$ be an abelian category, and let $C_{\bullet}$ be a chain complex in $\mathcal{A}$. Let $P_{\bullet}$ be a bounded below chain complex of projectives. Then any quasi-isomorphism $g\colon P_{\bullet} \to C_{\bullet}$ has a quasi-inverse.
\end{proposition}
\begin{proof}
  First we show that any morphism from a projective, bounded below complex into an exact complex is homotopic to zero. We do so by constructing a homotopy.
  \begin{equation*}
    \begin{tikzcd}
      \
      \arrow[r, dotted, no head]
      & P_{1}
      \arrow[r]
      \arrow[d]
      & P_{0}
      \arrow[r]
      \arrow[d]
      \arrow[dl, dashed, swap, "h_{1}"]
      & 0
      \arrow[d]
      \arrow[dl, dashed, swap, "h_{0}"]
      \arrow[r, dotted, no head]
      &\
      \\
      \
      \arrow[r, dotted, no head]
      & C_{1}
      \arrow[r]
      & C_{0}
      \arrow[r]
      & C_{-1}
      \arrow[r, dotted, no head]
      &\
    \end{tikzcd}
  \end{equation*}
  Consider the following solid commuting diagram, where $K$ is the kernel of $d^{C}_{1}$ and $r = f_{1} - h_{0} \circ d^{P}_{1}$ is \emph{not} the map $f_{1}$.
  \begin{equation*}
    \begin{tikzcd}
      && P_{1}
      \arrow[dd, "r"]
      \arrow[ddrr, "0"]
      \arrow[dl, dashed, "\exists!"]
      \arrow[ddll, dashed, bend right, swap, "\exists h_{1}"]
      \\
      & K
      \arrow[dr, hookrightarrow]
      \\
      C_{2}
      \arrow[ur, twoheadrightarrow]
      \arrow[rr, swap, "d^{C}_{2}"]
      && C_{1}
      \arrow[rr, swap, "d^{C}_{1}"]
      && C_{0}
    \end{tikzcd}
  \end{equation*}
  Because
  \begin{align*}
    d^{C}_{1} \circ r &= d^{C}_{1} \circ f_{1} - d^{C}_{1} \circ h_{0} \circ d^{P}_{1} \\
    &= d^{C}_{1} \circ f_{1} - d^{C}_{1} \circ f_{1} \\
    &= 0,
  \end{align*}
  the morphism $r$ factors through $K$. This gives us a morphism from a projective onto the target of an epimorphism, which we can lift to the source. This is what we call $h_{1}$.

  It remains to check that $h_{1}$ is a homotopy from $f$ to $0$. Plugging in, we find
  \begin{align*}
    d^{C}_{2} \circ h_{1} + h_{0} \circ d^{P}_{1} &= r + h_{0} \circ d^{P}_{1} \\
    &= f_{1}
  \end{align*}
  as required.

  Iterating this process, we get a homotopy between $0$ and $f$.

  Now let $f\colon C_{\bullet} \to P_{\bullet}$ be a quasi-isomorphism, where $P_{\bullet}$ is a bounded-below projective complex. Since $f$ is a quasi-isomorphism, $\cone(f)$ is exact, which means that $\iota\colon P \to \cone(f)$ is homotopic to the zero morphism.
  \begin{equation*}
    \begin{tikzcd}
      P_{i+1}
      \arrow[r, "d^{P}_{i+1}"]
      \arrow[d, bend left, "\iota_{i+1}"]
      \arrow[d, bend right, swap, "0"]
      & P_{i}
      \arrow[r, "d^{P}_{i}"]
      \arrow[d, bend left, "\iota_{i}"]
      \arrow[d, bend right, swap, "0"]
      \arrow[dl, dashed, swap, "\tilde{h}_{i}"]
      & P_{i-1}
      \arrow[d, bend left, "\iota_{i-1}"]
      \arrow[d, bend right, swap, "0"]
      \arrow[dl, dashed, swap, "\tilde{h}_{i-1}"]
      \\
      C_{i} \oplus P_{i+1}
      \arrow[r, swap, "d^{\cone(f)}_{i+1}"]
      & C_{i-1} \oplus P_{i}
      \arrow[r, swap, "d^{\cone(f)}_{i}"]
      & C_{i-2} \oplus P_{i-1}
    \end{tikzcd}
  \end{equation*}
  That is, there exist $\tilde{h}_{i}\colon P_{i} \to \cone(f)_{i+1}$ such that
  \begin{equation}
    \label{eq:cone_identity}
    d^{\cone f}_{i+1} \circ \tilde{h}_{i} + \tilde{h}_{i-1} \circ d^{P}_{i} = \iota.
  \end{equation}

  Writing $\tilde{h}_{i}$ in components as $\tilde{h}_{i} = (\beta_{i}, \gamma_{i})$, where
  \begin{equation*}
    \beta_{i}\colon P_{i} \to C_{i}\qquad\text{and}\qquad \gamma_{i}\colon P_{i-1} \to P_{i},
  \end{equation*}
  we find what looks tantalizingly like a chain map $\beta_{\bullet}\colon P_{\bullet} \to C_{\bullet}$. Indeed, writing \hyperref[eq:cone_identity]{Equation~\ref*{eq:cone_identity}} in components, we find the following.
  \begin{align*}
    \begin{pmatrix}
      -d^{C}_{i} & 0 \\
      -f_{i} & d^{P}_{i+1}
    \end{pmatrix}
    \begin{pmatrix}
      \beta_{i} \\
      \gamma_{i}
    \end{pmatrix}
    +
    \begin{pmatrix}
      \beta_{i-1} \\
      \gamma_{i-1}
    \end{pmatrix}
    \begin{pmatrix}
      d^{P}_{i}
    \end{pmatrix}
    &=
    \begin{pmatrix}
      0 \\
      \id_{P_{i}}
    \end{pmatrix}
    \\
    \begin{pmatrix}
      -d^{C}_{i} \circ \beta_{i} + \beta_{i-1} \circ d^{P}_{i} \\
      -f_{i} \circ \beta_{i} + d^{P}_{i+1} \circ \gamma_{i} + \gamma_{i-1} \circ d^{P}_{i}
    \end{pmatrix}
    &=
    \begin{pmatrix}
      0 \\
      \id_{P_{i}}
    \end{pmatrix}
  \end{align*}
  The first line tells us that $\beta$ is a chain map. The second line tells us that\footnote{Actually, it doesn't tell us this, but I suspect that it would if I were a little better at algebra.}
  \begin{equation*}
    d^{P}_{i+1} \circ \gamma_{i} + \gamma_{i-1} \circ d^{P}_{i} = \id_{P_{i}} - f_{i} \circ \beta_{i},
  \end{equation*}
  i.e.\ that $\gamma$ is a homotopy $\id_{P_{i}} \sim f_{i} \circ \beta_{i}$. But homology collapses homotopic maps, so
  \begin{equation*}
    H_{n}(\id_{P_{i}}) = H_{n}(f_{i}) \circ H_{n}(\beta_{i}),
  \end{equation*}
  which imples that
  \begin{equation*}
    H_{n}(\beta_{i}) = H_{n}(f_{i})^{-1}.
  \end{equation*}
\end{proof}

\section{Localization at weak equivalences: a love story}
\label{sec:localization_at_weak_equivalences_a_love_story}

We can embed any abelian category $\mathcal{A}$ into the corresponding category $\Ch(\mathcal{A})$ of chain complexes via inclusion into degree zero. This is obviously a lossless procedure, in the sense that we recover $\mathcal{A}$ by restricting to degree $0$.
\begin{equation*}
  \begin{tikzcd}
    \mathcal{A}
    \arrow[r, bend left, "\iota"]
    & \Ch(\mathcal{A})
    \arrow[l, bend left, "(-)_{0}"]
  \end{tikzcd}
\end{equation*}

Equivalently, we recover our category $\mathcal{A}$ by taking zeroth homology.
\begin{equation*}
  \begin{tikzcd}
    \mathcal{A}
    \arrow[r, bend left, "\iota"]
    & \Ch(\mathcal{A})
    \arrow[l, bend left, "H_{0}"]
  \end{tikzcd}
\end{equation*}

However, we notice that there are much better-behaved embeddings of $\mathcal{A}$ into $\Ch(\mathcal{A})$ such that we recover $\mathcal{A}$ when taking zeroth homology. For example, taking projective resolutions of objects and lifting morphisms using \hyperref[prop:can_lift_morphisms_to_projective_resolutions]{Proposition~\ref*{prop:can_lift_morphisms_to_projective_resolutions}} will do the trick. Unfortunately, this is not in general uniquely defined: one can take many different projective resolutions, and lift morphisms in many different ways. There is no reason to expect these data to assemble themselves functorially.

However, if we were to modify $\Ch(\mathcal{A})$ in such a way that all quasi-isomorphisms became bona-fide isomorphisms, then we would have this functoriality, thanks to \hyperref[prop:additive_functors_from_derived_category_squash_homotopies]{Proposition~\ref*{prop:additive_functors_from_derived_category_squash_homotopies}}.

Thus we find ourselves in a common situation: we have a category $\Ch(\mathcal{A})$, and identified a collection of morphisms inside this category which we would like to view as weak equivalences, namely the quasi-isomorphisms. In an ideal world, we would simply promote quasi-isomorphisms to bona fide isomorphisms. That is, we would like to form the localization
\begin{equation*}
  \Ch(\mathcal{A}) \to \Ch(\mathcal{A})[\{\text{quasi-isomorphisms}\}^{-1}].
\end{equation*}

Unfortunately, localization is not at all a trivial process, and one can get hurt if one is not careful. For that reason, actually constructing the above localization and then working with it is not a profitable approach to take.

However, note that we can get what we want by making a more draconian identification: collapsing all homotopy equivalences. Homotopy equivalence is friendlier than quasi-isomorphism in the sense that one can take the quotient by it; that is, there is a well-defined additive functor
\begin{equation*}
  \Ch(\mathcal{A}) \twoheadrightarrow \mathcal{K}(\mathcal{A})
\end{equation*}
which is the identity on objects and sends morphisms to their equivalence classes modulo homotopy; this sends precisely homotopy equivalences to isomorphisms. In fact, this is universal in the sense that every other additive functor sending quasi-isomorphisms to isomorphisms factors through it. In particular, the functor
\begin{equation*}
  \Ch(\mathcal{A}) \to \Ch(\mathcal{A})[\{\text{quasi-isomorphisms}^{-1}\}]
\end{equation*}
factors through it.

But now we are in a really wonderful position, as long as $\mathcal{A}$ has enough projectives: we can (by REF we have already proved) find a projective resolution functor
\begin{equation*}
  P\colon \mathcal{A} \to \mathcal{K}^{+}(\mathcal{A}).
\end{equation*}
In fact, this functor is an equivalence of categories.

\section{Homological \texorpdfstring{$\delta$}{delta}-functors and derived functors}
\label{sec:homological_delta_functors}

We have noticed that we can

\begin{definition}[derived functor]
  \label{def:derived_functor}
  Let $F\colon \mathcal{A} \to \mathcal{B}$ be a functor between abelian categories.
  \begin{itemize}
    \item If $F$ is right exact and $\mathcal{A}$ has enough projectives, we declare the \defn{left derived functor} to be the cohomological $\delta$-functor $\{L_{n}F\}$ defined by
      \begin{equation*}
        L_{n}F =
        \begin{tikzcd}
          \mathcal{A}
          \arrow[r, "P"]
          & \mathcal{K}(\Ch_{\geq 0}(\mathcal{A}))
          \arrow[r, "F"]
          & \mathcal{K}(\Ch_{\geq 0}(\mathcal{B}))
          \arrow[r, "H_{n}"]
          & \mathcal{B}
        \end{tikzcd}
      \end{equation*}
      where $P\colon \mathcal{A} \to \mathcal{K}(\Ch_{\geq 0}(\mathcal{A}))$ is a projective resolution functor.

    \item If $F$ is left exact and $\mathcal{A}$ has enough injectives, we define the \defn{right derived functor} to be the cohomological $\delta$-functor
      \begin{equation*}
        R^{n}F(X) = H^{n} \circ F \circ Q
      \end{equation*}
      where $Q$ is an injective resolution functor.
  \end{itemize}
\end{definition}

It may seem that we still have something left to prove; after all, we have not shown that the result of our composition is independant of the projective/injective resolution functor we used. However,

Because $\{H_{n}\}$ is a homological $\delta$-functor, it is trivial that ${L_{n}F}$ is a homological delta-functor. Note that it really does extend $F$ in the following sense.

\begin{proposition}
  Let $F\colon \mathcal{A} \to \mathcal{B}$ be a right exact functor between abelian categories. We have that
  \begin{equation*}
    L_{0}F \simeq F.
  \end{equation*}
\end{proposition}
\begin{proof}
  Let $P_{\bullet} \to X$ be a projective resolution. By \hyperref[lemma:equivalent_characterization_of_projective_resolution]{Lemma~\ref*{lemma:equivalent_characterization_of_projective_resolution}}, the following sequence is exact.
  \begin{equation*}
    \begin{tikzcd}
      P_{2}
      \arrow[r]
      & P_{1}
      \arrow[r, "f"]
      & P_{0}
      \arrow[r, twoheadrightarrow]
      & X
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  Since $F$ is right exact, the following sequence is exact.
  \begin{equation*}
    \begin{tikzcd}
      F(P_{2})
      \arrow[r]
      & F(P_{1})
      \arrow[r, "F(f)"]
      & F(P_{0})
      \arrow[r, twoheadrightarrow]
      & F(X)
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  This tells us that $F(X) \simeq \coker(F(f))$. But
  \begin{equation*}
    \coker(H(f)) \simeq H_{0}(P_{\bullet}) = L_{0}F(X).
  \end{equation*}

  Similarly, on morphisms
\end{proof}

\begin{definition}[homological \texorpdfstring{$\delta$}{delta}-functor]
  \label{def:homological_delta_functor}
  A \defn{homological $\delta$-functor} between abelian categories $\mathcal{A}$ and $\mathcal{B}$ consists of the following data.
  \begin{enumerate}
    \item For each $n \in \Z$, an additive functor
      \begin{equation*}
        T_{n}\colon \mathcal{A} \to \mathcal{B}.
      \end{equation*}

    \item For every short exact sequence
      \begin{equation*}
        \begin{tikzcd}
          0
          \arrow[r]
          & A
          \arrow[r]
          & B
          \arrow[r]
          & C
          \arrow[r]
          & 0
        \end{tikzcd}
      \end{equation*}
      in $\mathcal{A}$ and for each $n \in \Z$, a morphism
      \begin{equation*}
        \delta_{n}\colon T_{n}(C) \to T_{n-1}(A).
      \end{equation*}
  \end{enumerate}
  This data is subject to the following conditions.
  \begin{enumerate}
    \item For $n < 0$, we have $T_{n} = 0$.

    \item For every short exact sequence as above, there is a long exact sequence
      \begin{equation*}
        \begin{tikzcd}
          & \cdots
          \arrow[r]
          & T_{n+1}(C)
          \\
          T_{n}(A)
          \arrow[from=urr, out=-22, in=157, looseness=1, overlay, "\delta" description]
          \arrow[r, "T_{n}(f)"]
          & T_{n}(B)
          \arrow[r, "T_{n}(g)"]
          & T_{n}(C)
          \\
          T_{n-1}(A)
          \arrow[from=urr, out=-22, in=157, looseness=1, overlay, "\delta" description]
          \arrow[r, "T_{n-1}(f)"]
          & T_{n-1}(B)
          \arrow[r, "T_{n-1}(g)"]
          & T_{n-1}(C)
          \\
          T_{n-2}(A)
          \arrow[from=urr, out=-22, in=157, looseness=1, overlay, "\delta" description]
          \arrow[r]
          & \cdots
        \end{tikzcd}
      \end{equation*}

    \item For every morphism of short exact sequences
      \begin{equation*}
        \begin{tikzcd}
          0
          \arrow[r]
          & A
          \arrow[r]
          \arrow[d, swap, "f"]
          & B
          \arrow[r]
          \arrow[d, "g"]
          & C
          \arrow[r]
          \arrow[d, "h"]
          & 0
          \\
          0
          \arrow[r]
          & A'
          \arrow[r]
          & B'
          \arrow[r]
          & C'
          \arrow[r]
          & 0
        \end{tikzcd}
      \end{equation*}
      and every $n$, the diagram
      \begin{equation*}
        \begin{tikzcd}
          T_{n}(C)
          \arrow[r, "\delta_{n}"]
          \arrow[d, swap, "T_{n}(h)"]
          & T_{n-1}(A)
          \arrow[d, "T_{n}(f)"]
          \\
          T_{n}(C')
          \arrow[r, swap, "\delta_{n}"]
          & T_{n-1}(A')
        \end{tikzcd}
      \end{equation*}
      commutes; that is, a morphism of short exact sequences leads to a morphism of long exact sequences.
  \end{enumerate}
\end{definition}

This seems like an inelegant definition, and indeed it is.

\begin{definition}[cohomological \texorpdfstring{$\delta$}{delta}-functors]
  \label{def:cohomological_delta_functors}
  Dual to \hyperref[def:homological_delta_functor]{Definition~\ref*{def:homological_delta_functor}}.
\end{definition}

\begin{example}
  The prototypical example of a homological $\delta$-functor is homology: the collection $H_{n}\colon \Ch(\mathcal{A}) \to \mathcal{A}$, together with the collection of connecting homomorphisms, is a homological delta-functor. In fact, the most interesting homological delta functors called \emph{derived functors,} come from homology.
\end{example}


\section{Double complexes}
\label{sec:double_complexes}

\begin{definition}[double complex]
  \label{def:double_complex}
  Let $\mathcal{A}$ be an abelian category. A \defn{double complex} in $\mathcal{A}$ consists of an array $M_{i,j}$ of objects together with, for every $i$ and $j \in \Z$, morphisms
  \begin{equation*}
    d_{i,j}\colon M_{i,j} \to M_{i-1,j},\qquad \delta_{i,j}\colon M_{i,j} \to M_{i, j-1}
  \end{equation*}
  subject to the following conditions.
  \begin{itemize}
    \item $d^{2} = 0$

    \item $\delta^{2} = 0$

    \item $d \delta + \delta d = 0$
  \end{itemize}

  We say that $M_{\bullet,\bullet}$ is \defn{first-quadrant} if $M_{i,j} = 0$ for $i$, $j < 0$.
\end{definition}

That is, for $M$ a double complex the following diagram anticommutes rather than commutes.
\begin{equation*}
  \begin{tikzcd}
      M_{0,3}
      \arrow[d]
      & M_{1,3}
      \arrow[d]
      \arrow[l]
      & M_{2,3}
      \arrow[d]
      \arrow[l]
      & M_{3,3}
      \arrow[d]
      \arrow[l]
      \\
      M_{0,2}
      \arrow[d]
      & M_{1,2}
      \arrow[d]
      \arrow[l]
      & M_{2,2}
      \arrow[d]
      \arrow[l]
      & M_{3,2}
      \arrow[d]
      \arrow[l]
      \\
      M_{0,1}
      \arrow[d]
      & M_{1,1}
      \arrow[d]
      \arrow[l]
      & M_{2,1}
      \arrow[d]
      \arrow[l]
      & M_{3,1}
      \arrow[d]
      \arrow[l]
      \\
      M_{0,0}
      & M_{1,0}
      \arrow[l]
      & M_{2,0}
      \arrow[l]
      & M_{3,0}
      \arrow[l]
      \\
    \end{tikzcd}
\end{equation*}

Given any complex of complexes
\begin{equation*}
  \left( \begin{tikzcd}
    \cdots
    \arrow[r]
    & M_{1,\bullet}
    \arrow[r]
    & M_{0,\bullet}
    \arrow[r]
    & M_{-1,\bullet}
    \arrow[r]
    & \cdots
  \end{tikzcd} \right)
  \in \Ch(\Ch(\mathcal{A})),
\end{equation*}
one can construct a double complex by multiplying every other differential by $-1$.

\begin{definition}[total complex]
  \label{def:total_complex}
  Let $M_{\bullet, \bullet}$ be a first-quadrant\footnote{This restriction is not strictly necessary, but then one has to deal with infinite direct sums, and hence must decide whether one wants the direct sum or the direct product. We only need first-quadrant double complexes, so all of our sums will be finite.} double complex. The \defn{total complex} $\Tot(M)_{\bullet}$ is defined level-wise by
  \begin{equation*}
    \Tot(M)_{n}  = \bigoplus_{i + j = n} M_{i,j},
  \end{equation*}
  with differential given by $d_{\Tot} = d + \delta$.
\end{definition}

\begin{lemma}
  \label{lemma:total_complex_is_complex}
  The total complex really is a complex, i.e.
  \begin{equation*}
    d_{\Tot} \circ d_{\Tot} = 0.
  \end{equation*}
\end{lemma}
\begin{proof}
  Hand-wavily, we have
  \begin{equation*}
    d_{\Tot} \circ d_{\Tot} = (d + \delta) \circ (d + \delta) = d^{2} + d \circ \delta + \delta \circ d + \delta^{2} = 0.
  \end{equation*}
\end{proof}

\begin{theorem}
  \label{thm:conditions_total_complex_exact}
  Let $M_{i,j}$ be a first-quadrant double complex. Then if either the rows $M_{\bullet, j}$ or the columns $M_{i, \bullet}$ are exact, then the total complex $\Tot(M)_{\bullet}$ is exact.
\end{theorem}
\begin{proof}
  Let $M_{i,j}$ be a first-quadrant double complex, without loss of generality with exact rows.
  \begin{equation*}
    \begin{tikzcd}
      M_{3,0}
      \arrow[d, swap, "d_{3,0}"]
      \\
      M_{2,0}
      \arrow[d, swap, "d_{2,0}"]
      & M_{2,1}
      \arrow[l, swap, "\delta_{2,1}"]
      \arrow[d, "d_{2,1}"]
      \\
      M_{1,0}
      \arrow[d, swap, "d_{1,0}"]
      & M_{1,1}
      \arrow[l, swap, "\delta_{1,1}"]
      \arrow[d, "d_{1,1}"]
      & M_{1,2}
      \arrow[l, swap, "\delta_{1,2}"]
      \arrow[d, "d_{1,2}"]
      \\
      M_{0,0}
      & M_{0,1}
      \arrow[l, "\delta_{0,1}"]
      & M_{0,2}
      \arrow[l, "\delta_{0,2}"]
      & M_{0,3}
      \arrow[l, "\delta_{0,3}"]
    \end{tikzcd}
  \end{equation*}
  We want to show that the total complex
  \begin{equation*}
    \begin{tikzcd}
      M_{3,0} \oplus M_{2,1} \oplus M_{1,2} \oplus M_{0,3}
      \arrow[d]
      &=
      & \Tot(M)_{3}
      \arrow[d]
      \\
      M_{2,0} \oplus M_{1,1} \oplus M_{0,2}
      \arrow[d]
      &=
      & \Tot(M)_{2}
      \arrow[d]
      \\
      M_{1,0} \oplus M_{0,1}
      \arrow[d]
      &=
      & \Tot(M)_{1}
      \arrow[d]
      \\
      M_{0,0}
      \arrow[d]
      &=
      & \Tot(M)_{0}
      \arrow[d]
      \\
      0
      && 0
    \end{tikzcd}
  \end{equation*}
  is exact.

  The construction is inductive on the degree of the total complex. At level 0 there is nothing to show; the morphism $d^{\Tot}_{1}$ is manifestly surjective since $\delta_{0,1}$ is. Since numbers greater than $1$ are for all intents and purposes interchangable, we construct the inductive step for $n = 2$.

  We have a triple $m = (m_{2,0}, m_{1,1}, m_{0,2}) \in \Tot(M)_{2}$ which maps to 0 under $d^{\Tot}_{2}$; that is,
  \begin{equation*}
    d_{2,0}m_{2,0} + \delta_{1,1}m_{1,1} = 0,\qquad d_{11} m_{1,1} + \delta_{0,2} m_{0,2} = 0.
  \end{equation*}

  Our goal is to find
  \begin{equation*}
    n = (n_{3,0}, n_{2,1}, n_{1,2}, n_{0,3}) \in \Tot(M)_{3}
  \end{equation*}
  such that $d^{\Tot}_{3}n = m$.

  We make our lives easier by choosing $n_{3,0} = 0$. By exactness, we can always $n_{2,1}$ such that $\delta n_{2,1} = m_{2,0}$. Thus, by anti-commutativity,
  \begin{equation*}
    d \delta n_{2,1} = -\delta d n_{2,1}.
  \end{equation*}
  But $\delta n_{2,1} = m_{2,0} = -\delta m_{1,1}$, so
  \begin{equation*}
    \delta(m_{1,1} - d n_{2,1}) = 0.
  \end{equation*}
  This means that $m_{1,1} - dn_{2,1} \in \ker \delta$, i.e.\ that there exists $n_{1,2}$ such that $\delta n_{1,2} = m_{1,1} - dn_{2,1}$. Thus
  \begin{equation*}
    d \delta n_{1,2} = d m_{1,1} = -\delta m_{0,2}.
  \end{equation*}
  But
  \begin{equation*}
    d \delta n_{1,2} = -\delta d n_{1,2},
  \end{equation*}
  so
  \begin{equation*}
    \delta(m_{0,2} - d n_{1,2}) = 0.
  \end{equation*}

  Now we repeat this process, finding $n_{1,2}$ such that
  \begin{equation*}
    \delta n_{1,2} = m_{1,1} - d n_{2,1},
  \end{equation*}
  and $n_{0,3}$ such that
  \begin{equation*}
    \delta n_{0,3} = m_{0,2} - d n_{1,2}.
  \end{equation*}
  Then
  \begin{align*}
    d^{\Tot}(n_{3,0} + n_{2,1} + n_{1,2} + n_{0,3}) &= 0 + (d + \delta) n_{2,1} + (d + \delta)n_{1,2} + (d + \delta) n_{0,3} \\
    &= 0 + 0 + m_{2,0} + d n_{2,1} + (m_{1,1} - dn_{2,1}) + d n_{1,2} + (m_{0,2} - d n_{1,2}) + 0 \\
    &= m_{2,0} + m_{1,1} + m_{0,2}
  \end{align*}
  as required.
\end{proof}

Consider any morphism $\alpha$ in $\Ch_{\geq 0}(\Ch_{\geq 0}(\mathcal{A}))$ to a complex concentrated in degree 0. We can view this in two ways.
\begin{itemize}
  \item As a chain
    \begin{equation*}
      \begin{tikzcd}
        C_{2,\bullet}
        \arrow[r]
        & C_{1,\bullet}
        \arrow[r]
        & C_{0,\bullet}
        \arrow[r, "\alpha"]
        & D_{\bullet}
      \end{tikzcd}
    \end{equation*}
    hence (by inserting appropriate minus signs) a double complex $C^{D}_{\bullet,\bullet}$;

  \item As a morphism between double complexes, hence between totalizations
    \begin{equation*}
      \Tot(\alpha)_{\bullet}\colon \Tot(C)_{\bullet} \to \Tot(D)_{\bullet}.
    \end{equation*}
\end{itemize}

\begin{lemma}
  \label{lemma:total_complex_is_cone_of_quasi_isomorphism}
  These two points of view agree in the sense that
  \begin{equation*}
    \Tot(C^{D}) = \Cone(\Tot(\alpha)).
  \end{equation*}
\end{lemma}
\begin{proof}
  Write down the definitions.
\end{proof}

\begin{theorem}
  \label{thm:resolutions_in_double_complexes_are_resolutions_of_total_complex}
  Let $A_{\bullet} \in \Ch_{\geq 0}(\mathcal{A})$, and let
  \begin{equation*}
    \begin{tikzcd}
      \cdots
      \arrow[r]
      \arrow[d]
      & M_{2, \bullet}
      \arrow[r]
      \arrow[d]
      & M_{1, \bullet}
      \arrow[r]
      \arrow[d]
      & M_{0, \bullet}
      \arrow[d, "\alpha_{\bullet}"]
      \\
      \cdots
      \arrow[r]
      & 0
      \arrow[r]
      & 0
      \arrow[r]
      & A_{\bullet}
    \end{tikzcd}
  \end{equation*}
  be a resolution of $A_{\bullet}$. Then $\Tot(M)$ is quasi-isomorphic to $A$.
\end{theorem}
\begin{proof}
  The sequence
  \begin{equation*}
    \begin{tikzcd}
      \cdots
      \arrow[r]
      & M_{2,\bullet}
      \arrow[r]
      & M_{1,\bullet}
      \arrow[r]
      & M_{0,\bullet}
      \arrow[r]
      & A_{\bullet}
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  is exact. By \hyperref[thm:conditions_total_complex_exact]{Theorem~\ref*{thm:conditions_total_complex_exact}}, the total complex $\Tot(M^{A})$ is exact. But by \hyperref[lemma:total_complex_is_cone_of_quasi_isomorphism]{Lemma~\ref*{lemma:total_complex_is_cone_of_quasi_isomorphism}} the total complex is equivalently the cone of $\alpha_{\bullet}$. However, we have seen (in \hyperref[cor:cone_controls_quasi_isomorphism]{Corollary~\ref*{cor:cone_controls_quasi_isomorphism}}) that exactness of $\cone(\alpha_{\bullet})$ means that $\alpha_{\bullet}$ is a quasi-isomorphism.
\end{proof}

\begin{corollary}
  Let
  \begin{equation*}
    \begin{tikzcd}
      \cdots
      \arrow[r]
      & M_{2,\bullet}
      \arrow[r]
      & M_{1,\bullet}
      \arrow[r]
      & M_{0,\bullet}
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  be a complex in $\Ch_{\geq 0}(\Ch_{\geq 0}(\mathcal{A}))$ such that $H_{0}(M_{i, \bullet}) = 0$ for $i \neq 0$. Then $\Tot(M)$ is quasi-isomorphic to the sequence
  \begin{equation*}
    \begin{tikzcd}
      \cdots
      \arrow[r]
      & H_{0}(M_{2,\bullet})
      \arrow[r]
      & H_{0}(M_{1,\bullet})
      \arrow[r]
      & H_{0}(M_{0,\bullet})
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
\end{corollary}
\begin{proof}
  For each $i$ we can write
  \begin{equation*}
    H_{0}(M_{i, \bullet}) = \coker d^{M_{i}}_{1}.
  \end{equation*}
In particular, we have a double complex
\begin{equation*}
  \begin{tikzcd}
    M_{0,3}
    \arrow[d]
    & M_{1,3}
    \arrow[d]
    \arrow[l]
    & M_{2,3}
    \arrow[d]
    \arrow[l]
    & M_{3,3}
    \arrow[d]
    \arrow[l]
    \\
    M_{0,2}
    \arrow[d]
    & M_{1,2}
    \arrow[d]
    \arrow[l]
    & M_{2,2}
    \arrow[d]
    \arrow[l]
    & M_{3,2}
    \arrow[d]
    \arrow[l]
    \\
    M_{0,1}
    \arrow[d]
    & M_{1,1}
    \arrow[d]
    \arrow[l]
    & M_{2,1}
    \arrow[d]
    \arrow[l]
    & M_{3,1}
    \arrow[d]
    \arrow[l]
    \\
    M_{0,0}
    \arrow[d]
    & M_{1,0}
    \arrow[l]
    \arrow[d]
    & M_{2,0}
    \arrow[l]
    \arrow[d]
    & M_{3,0}
    \arrow[l]
    \arrow[d]
    \\
    H_{0}(M_{0,\bullet})
    \arrow[d]
    & H_{0}(M_{1,\bullet})
    \arrow[d]
    \arrow[l]
    & H_{0}(M_{2,\bullet})
    \arrow[d]
    \arrow[l]
    & H_{0}(M_{3,\bullet})
    \arrow[l]
    \arrow[d]
    \\
    0
    & 0
    & 0
    & 0
  \end{tikzcd}
\end{equation*}
  Flipping along the main diagonal, we have the following resolution.
  \begin{equation*}
    \begin{tikzcd}
      M_{\bullet, 2}
      \arrow[r]
      & M_{\bullet, 1}
      \arrow[r]
      & M_{\bullet, 0}
      \arrow[r]
      & H_{0}(M_{\bullet, \bullet})
    \end{tikzcd}
  \end{equation*}

  Now \hyperref[thm:resolutions_in_double_complexes_are_resolutions_of_total_complex]{Theorem~\ref*{thm:resolutions_in_double_complexes_are_resolutions_of_total_complex}} gives us the result we want.
\end{proof}

\section{Tensor-hom adjunction for chain complexes}
\label{sec:tensor_hom_adjunction_for_chain_complexes}

In a general abelian category, there is no notion of a tensor product. However, many interesting abelian categories carry tensor products, and we would like to be able to talk about them. In this section, we let $\mathcal{A}$ be an abelian category and let
\begin{equation*}
  -\otimes -\colon \mathcal{A}\op \otimes \mathcal{A} \to \mathcal{H},
\end{equation*}
be an additive functor, where $\mathcal{H}$ is some abelian category equipped with an exact functor to $\Ab$. Further suppose that

\begin{definition}[tensor product of chain complexes]
  \label{def:tensor_product_of_chain_complexes}
  Let $C_{\bullet}$, $D_{\bullet}$ be chain complexes in $\mathcal{A}$. We define the \defn{tensor product} of $C_{\bullet}$ and $D_{\bullet}$ by
  \begin{equation*}
    (C \otimes D)_{\bullet} = \Tot(C_{\bullet} \otimes D_{\bullet}),
  \end{equation*}
  where $\Tot(C_{\bullet} \otimes D_{\bullet})$ is the totalization of the double complex $C_{\bullet} \otimes D_{\bullet}$.
\end{definition}

\begin{definition}[internal hom]
  \label{def:internal_hom}
  Let $\mathcal{A}$ be an abelian category with an internal hom functor (for example, a category of modules over a commutative ring), and let $C_{\bullet}$, $D_{\bullet}$ be chain complexes in $\mathcal{A}$. We have
\end{definition}

\section{The Künneth formula}
\label{sec:the_kunneth_formula}

This section takes place in $\Rmod$, where $R$ is a PID. For example, everything we are saying holds in $\Ab$.

\begin{lemma}
  \label{lemma:stepping_stone_to_kunneth}
  Let $C_{\bullet}$ be a chain complex of free $R$-modules with trivial differential, and let $C'_{\bullet}$ be an arbitrary chain complex. Then there is an isomorphism
  \begin{equation*}
    \lambda\colon \bigoplus_{p + q = n} H_{p}(C_{\bullet}) \otimes H_{q}(C'_{\bullet}) \cong H_{n}(C_{\bullet} \otimes C'_{\bullet}).
  \end{equation*}
\end{lemma}
\begin{proof}
  We write
  \begin{equation*}
    Z_{p} = Z_{p}(C_{\bullet}),\qquad B_{p} = B_{p}(C_{\bullet}),\qquad Z'_{p} = Z_{p}(C'_{\bullet}),\qquad B'_{p} = B_{p}(C'_{\bullet}),
  \end{equation*}
  The sequence
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & Z_{q}'
      \arrow[r, hook]
      & C_{q}'
      \arrow[r, two heads]
      & B_{q-1}'
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  is exact by definition, and since $Z_{p} = C_{p}$ is by assumption free, the sequence

  By definition, $Z_{p} = C_{p}$ is free. Thus the sequence
  \begin{equation*}
    \begin{tikzcd}
      0
      \arrow[r]
      & Z_{p} \otimes Z_{q}'
      \arrow[r, hook]
      & Z_{p} \otimes C_{q}'
      \arrow[r, two heads]
      & Z_{p} \otimes B_{q-1}'
      \arrow[r]
      & 0
    \end{tikzcd}
  \end{equation*}
  is exact.

  The differential of the tensor product complex $C_{\bullet} \otimes C'_{\bullet}$ is
  \begin{align*}
    d^{\mathrm{tot}}_{n} &= \sum_{i = 0}^{n} d^{C}_{i} \otimes \id_{C_{n-i}} + (-1)^{i} \id_{C_{i}} \otimes d^{C'}_{n-i} \\
    &= \sum_{i = 0}^{n} (-1)^{i}\id_{C_{i}} \otimes d^{C}_{n-i}.
  \end{align*}
  Since $C_{i}$ is by assumption free, tensoring with it doesn't change homology, and we have
  \begin{equation*}
    Z_{n}(C_{\bullet} \otimes C'_{\bullet}) = \bigoplus_{p + q = n} Z_{p} \otimes Z'_{q},
  \end{equation*}
  and
  \begin{equation*}
    Z_{n}(C_{\bullet} \otimes C'_{\bullet}) = \bigoplus_{p + q = n} Z_{p} \otimes Z'_{q},
  \end{equation*}

\end{proof}

\end{document}
